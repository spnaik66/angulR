!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(self.webpackChunkschool_ang_proj=self.webpackChunkschool_ang_proj||[]).push([[558],{81558:function(e,n,o){"use strict";o.r(n),o.d(n,{HierarchyManagementModule:function(){return qt}});var a=o(61116),l=o(11462),s=o(85907),c=o(87368),u=o(42693),d=o(17145),p=function(){var t=function(){function t(e){i(this,t),this._httpClient=e,this.url=d.A.HIERARCHY}return r(t,[{key:"sIndex",value:function(){return this._httpClient.get(this.url)}},{key:"sStore",value:function(t){var e=Object.assign({},t);return this._httpClient.post(this.url,e)}},{key:"sShow",value:function(t){return this._httpClient.get(this.url+"/"+t)}},{key:"sUpdate",value:function(t,e){return this._httpClient.patch(this.url+"/"+t,e)}},{key:"sDelete",value:function(t){return this._httpClient.delete(this.url+"/"+t)}},{key:"sSendNotifications",value:function(t){return this._httpClient.get(this.url+"/"+t)}},{key:"upload",value:function(t){var e=new FormData;e.append("file",t);var i=new u.aW("POST","".concat(this.url,"/bulk-import"),e,{reportProgress:!0,responseType:"json"});return this._httpClient.request(i)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.LFG(u.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),f=o(89264),h=o(905);o(90750);var g=function(){var t=function(){function t(e){i(this,t),this._httpClient=e,this.url=d.A.FAMILY_MEMBER}return r(t,[{key:"sIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("sIndex");var e=this.url;return t&&(e=e+"?type="+t),this._httpClient.get(e)}},{key:"sStore",value:function(t){return this._httpClient.post(this.url,t)}},{key:"sShow",value:function(t){return this._httpClient.get(this.url+"/"+t)}},{key:"sUpdate",value:function(t,e){return this._httpClient.patch(this.url+"/"+t,e)}},{key:"sDelete",value:function(t){return this._httpClient.delete(this.url+"/"+t)}},{key:"sGetFamilyMember",value:function(t){return this._httpClient.get(this.url+"/members/"+t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.LFG(u.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),m=o(37205),Z=o(35703),v=o(80570),b=o(23458),y=o(12937),A=o(98911),T=o(32370),q=o(22041),_=["myModal"];function k(t,e){1&t&&c._UZ(0,"v-loader")}function x(t,e){if(1&t&&(c.TgZ(0,"option",32),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.Q6J("value",i._id),c.xp6(1),c.lnq(" ",i.name," - ",i.contactNumber,"- ",i.permanentAddress," ")}}function C(t,e){if(1&t&&(c.TgZ(0,"option",32),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.Q6J("value",i.familyName),c.xp6(1),c.hij(" ",i.familyName," ")}}function S(t,e){if(1&t&&(c.TgZ(0,"option",32),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.Q6J("value",i._id),c.xp6(1),c.lnq(" ",i.name," - ",i.contactNumber,"- ",i.permanentAddress," ")}}function U(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"button",48),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).addMember()}),c._uU(1," Add "),c.qZA()}}function w(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"button",49),c.NdJ("click",function(){c.CHM(i);var t=c.oxw().index;return c.oxw().deleteMember(t)}),c._uU(1," Delete "),c.qZA()}}function M(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",33),c.TgZ(2,"div",11),c.TgZ(3,"div",34),c.TgZ(4,"div",35),c.TgZ(5,"div",36),c.TgZ(6,"div",37),c.TgZ(7,"select",38),c.TgZ(8,"option",32),c._uU(9,"--Select--"),c.qZA(),c.YNc(10,C,2,2,"option",16),c.qZA(),c.qZA(),c.TgZ(11,"div",39),c.TgZ(12,"button",30),c.NdJ("click",function(){return c.CHM(i),c.oxw().onClickHandlier()}),c._UZ(13,"div",40),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",41),c.TgZ(15,"div",35),c.TgZ(16,"select",42),c.TgZ(17,"option",43),c._uU(18,"--Select--"),c.qZA(),c.YNc(19,S,2,4,"option",16),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",44),c.YNc(21,U,2,0,"button",45),c.qZA(),c.TgZ(22,"div",46),c.YNc(23,w,2,0,"button",47),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var n=e.index,r=c.oxw();c.xp6(1),c.Q6J("formGroupName",n),c.xp6(7),c.Q6J("value",null),c.xp6(2),c.Q6J("ngForOf",r.list),c.xp6(7),c.Q6J("value",null),c.xp6(2),c.Q6J("ngForOf",r.contactlist),c.xp6(2),c.Q6J("ngIf",r.forArray.controls.length===n+1),c.xp6(2),c.Q6J("ngIf",n>0)}}var N=function(){var t=function(){function t(e,n,r,o,a,l){i(this,t),this._hierarchyService=e,this._activatedRoute=n,this._contactsService=r,this._familyService=o,this.familyMasterServiceService=a,this.modalService=l,this.isSubmitted=!1,this.title="Hierarchy Candidate",this.backLink="/hierarchy-management",this.contactlist=[],this.isAddingDownline=!1,this.isRelationShip=!1,this.list=[],this.uplineMember="",this.groupName="",this.selectedId=this._activatedRoute.snapshot.params.id,this.getAllContacts(),this.getContactInfo(this.selectedId)}return r(t,[{key:"ngOnInit",value:function(){this.form=new l.cw({femilyList:new l.Oe([],l.kI.required)}),this.addMember(),this.getAllFamilyMembers(this.selectedId),this.indexGroup()}},{key:"forArray",get:function(){return this.form.get("femilyList")}},{key:"addMember",value:function(){var t=new l.cw({member:new l.NI(null,l.kI.required),relation:new l.NI(null,l.kI.required)});this.forArray.push(t)}},{key:"indexGroup",value:function(){var t=this;this.isSubmitted=!0,this.list=[],this.familyMasterServiceService.sIndex().subscribe(function(e){e&&e.data&&e.data.length&&(t.list=e.data),t.isSubmitted=!1},function(e){console.log(e),s.error("No data found","Error !"),t.isSubmitted=!1})}},{key:"deleteMember",value:function(t){this.forArray.removeAt(t)}},{key:"getAllFamilyMembers",value:function(t){this._familyService.sGetFamilyMember(t).subscribe(function(t){})}},{key:"getContactInfo",value:function(t){var e=this;this._contactsService.sShow(t).subscribe(function(t){e.uplineMember=t.data.uplineContact._id},function(t){console.log(t)})}},{key:"getAllContacts",value:function(){var t=this;this._contactsService.sIndex().subscribe(function(e){t.contactlist=e.data},function(t){console.log(t)})}},{key:"updateUplinemember",value:function(){this.uplineMember=this.uplineMember.trim(),this._contactsService.setUplineMember(this.selectedId,{uplineContact:this.uplineMember}).subscribe(function(t){s.success("Upline Member Updated Successfully")})}},{key:"onAddFamilyMember",value:function(){var t=this,e=[];this.forArray.controls.forEach(function(i){e.push({person:t.selectedId,relationalPerson:i.value.member,relationType:i.value.relation})}),this._familyService.sStore(e).subscribe(function(e){t.indexGroup(),t.modalService.close(t.myModal),s.success("Family Member Added Successfully")})}},{key:"Add",value:function(){var t=this,e={familyName:this.groupName};this.isSubmitted=!0,this.familyMasterServiceService.sStore(e).subscribe(function(e){t.isSubmitted=!1,t.modalService.close(t.myModal)},function(e){t.isSubmitted=!1})}},{key:"onClickHandlier",value:function(){this.modalService.open(this.myModal,{size:"md"})}},{key:"closeModal",value:function(){this.modalService.close(this.myModal)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(p),c.Y36(f.gz),c.Y36(h.P),c.Y36(g),c.Y36(m.f),c.Y36(Z.gk))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-edit-hierarchy"]],viewQuery:function(t,e){var i;(1&t&&c.Gf(_,5),2&t)&&(c.iGM(i=c.CRH())&&(e.myModal=i.first))},decls:57,vars:10,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[1,"row"],[1,"col-md-6"],["for","upline"],["name","upline","id","upline",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","mt-2"],["for","upline",1,"pt-1"],[1,"btn","btn-primary","mt-4",3,"click"],["id","familymember",1,"mt-4",3,"formGroup"],[1,"col-6"],[1,"col-5"],["formArrayName","femilyList"],[4,"ngFor","ngForOf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["myModal",""],["for",""],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"value"],[3,"formGroupName"],[1,"col-md-5"],[1,"form-group"],[1,"group-position"],[1,"control",2,"flex","1"],["name","","id","","formControlName","relation",1,"form-control"],[1,"search-button"],[1,"fa","fa-plus"],[1,"col-md-4"],["name","","id","","formControlName","member",1,"form-control"],["disabled","",3,"value"],[1,"com-md-1"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"com-md-1","ml-1"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(c.YNc(0,k,1,0,"v-loader",0),c.TgZ(1,"div",1),c._UZ(2,"app-header"),c._UZ(3,"app-sidebar"),c.TgZ(4,"div",2),c._UZ(5,"app-content-header",3),c.TgZ(6,"section",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"h3",7),c._uU(10),c.qZA(),c.TgZ(11,"div",8),c._UZ(12,"v-btn",9),c.qZA(),c.qZA(),c.TgZ(13,"div",10),c.TgZ(14,"form"),c.TgZ(15,"div",11),c.TgZ(16,"div",12),c.TgZ(17,"label",13),c._uU(18,"Upline Member"),c.qZA(),c.TgZ(19,"select",14),c.NdJ("ngModelChange",function(t){return e.uplineMember=t}),c.TgZ(20,"option",15),c._uU(21,"Select Upline Member"),c.qZA(),c.YNc(22,x,2,4,"option",16),c.qZA(),c.qZA(),c.TgZ(23,"div",17),c._UZ(24,"label",18),c.TgZ(25,"button",19),c.NdJ("click",function(){return e.updateUplinemember()}),c._uU(26," Update Upline "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"form",20),c.TgZ(28,"h5"),c._uU(29,"Family Mambers"),c.qZA(),c.TgZ(30,"div",11),c.TgZ(31,"div",21),c.TgZ(32,"b"),c._uU(33,"Relation Type"),c.qZA(),c.qZA(),c.TgZ(34,"div",22),c.TgZ(35,"b"),c._uU(36,"Member Name"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(37,"div",23),c.YNc(38,M,24,7,"div",24),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",25),c.TgZ(40,"button",26),c.NdJ("click",function(){return e.onAddFamilyMember()}),c._uU(41," Update "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(42,"app-footer"),c.qZA(),c.TgZ(43,"modal",null,27),c.TgZ(45,"modal-header"),c.TgZ(46,"h1"),c._uU(47,"Add Family"),c.qZA(),c.qZA(),c.TgZ(48,"modal-content"),c.TgZ(49,"label",28),c._uU(50,"Family Type"),c.qZA(),c.TgZ(51,"input",29),c.NdJ("ngModelChange",function(t){return e.groupName=t}),c.qZA(),c.qZA(),c.TgZ(52,"modal-footer"),c.TgZ(53,"button",30),c.NdJ("click",function(){return e.Add()}),c._uU(54,"Add"),c.qZA(),c.TgZ(55,"button",31),c.NdJ("click",function(){return e.closeModal()}),c._uU(56,"close"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Q6J("ngIf",e.isSubmitted),c.xp6(5),c.Q6J("title",e.title)("canshowBreadCrumb",!0),c.xp6(5),c.hij("Edit ",e.title,""),c.xp6(2),c.Q6J("link",e.backLink),c.xp6(7),c.Q6J("ngModel",e.uplineMember),c.xp6(3),c.Q6J("ngForOf",e.contactlist),c.xp6(5),c.Q6J("formGroup",e.form),c.xp6(11),c.Q6J("ngForOf",e.forArray.controls),c.xp6(13),c.Q6J("ngModel",e.groupName))},directives:[a.O5,v.G,b.k,y.e,A.K,l._Y,l.JL,l.F,l.EJ,l.JJ,l.On,l.YN,l.Kr,a.sg,l.sg,l.CE,T.c,Z.zS,Z.Rb,Z.Ef,l.Fj,Z.YI,q.O,l.x0,l.u],styles:[".group-position[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end;align-items:center;margin-bottom:10px}"]}),t}(),I=o(99713),J=o(70118),F=o(71397),O=o(86659),Q=o(54733),Y=o(83559),L=o(72644),R=o(75470),B=o(739),E=o(68281);function G(t,e){1&t&&c._UZ(0,"v-loader")}function P(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"div",22),c.TgZ(2,"div",23),c.TgZ(3,"label",24),c._uU(4,"City"),c.qZA(),c.qZA(),c.TgZ(5,"div",25),c.TgZ(6,"ng-select2",26),c.NdJ("ngModelChange",function(t){return c.CHM(i),c.oxw().contact=t})("valueChanged",function(t){return c.CHM(i),c.oxw().onTagChanged(t)}),c.qZA(),c.qZA(),c.TgZ(7,"div",27),c.TgZ(8,"button",28),c.TgZ(9,"div",29),c.NdJ("click",function(){return c.CHM(i),c.oxw().onFiletreSearch()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var n=c.oxw();c.xp6(6),c.Q6J("ngModel",n.contact)("data",n.contactList)("options",n.options)("placeholder","select city")}}function D(t,e){if(1&t&&(c.TgZ(0,"th",30),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.xp6(1),c.hij(" ",i," ")}}var H=function(t,e){return[t,e]},j=function(t,e){return[t,e,"edit"]};function $(t,e){if(1&t&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._UZ(4,"img",32),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.qZA(),c.TgZ(15,"td"),c._uU(16),c.qZA(),c.TgZ(17,"td"),c.TgZ(18,"div"),c._UZ(19,"v-btn",33),c._UZ(20,"v-btn",34),c.qZA(),c.qZA(),c.qZA()),2&t){var i,n=e.$implicit,r=e.index,o=c.oxw(2);c.xp6(2),c.Oqu(r+1),c.xp6(2),c.s9C("src",null!==(i=n.profilePictureUrl)&&void 0!==i?i:o.avatarImgLocalPath,c.LSH),c.xp6(2),c.Oqu(n.surname),c.xp6(2),c.Oqu(n.middleName),c.xp6(2),c.Oqu(n.name),c.xp6(2),c.Oqu(n.phoneNumber),c.xp6(2),c.Oqu(n.city),c.xp6(2),c.Oqu(n.addType),c.xp6(3),c.Q6J("link",c.WLB(10,H,o.editLink,n._id)),c.xp6(1),c.Q6J("link",c.WLB(13,j,o.editLink,n._id))}}function z(t,e){if(1&t&&(c.TgZ(0,"tbody"),c.YNc(1,$,21,16,"tr",31),c.qZA()),2&t){var i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.list)}}function V(t,e){if(1&t&&(c.TgZ(0,"th",30),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.xp6(1),c.hij(" ",i," ")}}function K(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c.TgZ(8,"button",15),c.NdJ("click",function(){var t=c.CHM(i).$implicit;return c.oxw(2).sendNotification(t._id)}),c._uU(9," Send "),c.qZA(),c.qZA(),c.qZA()}if(2&t){var n=e.$implicit,r=e.index;c.xp6(2),c.Oqu(r+1),c.xp6(2),c.Oqu(n.name),c.xp6(2),c.Oqu(n.message)}}var X=function(){return["Id","Name","Message","Actions"]};function W(t,e){if(1&t){var i=c.EpF();c.TgZ(0,"div",35),c.TgZ(1,"h4",36),c._uU(2,"Select Annoucements"),c.qZA(),c.TgZ(3,"button",37),c.NdJ("click",function(){c.CHM(i);var t=c.oxw();return null==t.modalRef?null:t.modalRef.hide()}),c.TgZ(4,"span",38),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",39),c.TgZ(7,"table",40),c.TgZ(8,"thead",18),c.TgZ(9,"tr"),c.YNc(10,V,2,1,"th",19),c.qZA(),c.qZA(),c.TgZ(11,"tbody"),c.YNc(12,K,10,3,"tr",31),c.qZA(),c.qZA(),c.qZA()}if(2&t){var n=c.oxw();c.xp6(10),c.Q6J("ngForOf",c.DdM(2,X)),c.xp6(2),c.Q6J("ngForOf",n.anouncementsList)}}var tt=function(t){return[t]},et=function(){return{mode:"hierarchy"}},it=function(){var e=function(){function e(t,n,r){i(this,e),this._contactsService=t,this.modalService=n,this._announcementsService=r,this.isFilter=!1,this.isSubmitted=!1,this.title="Hierarchy Management",this.addLink="/contact-management/contacts/create",this.editLink="/hierarchy-management",this.list=[],this.dtOptions={},this.dtTrigger=new Y.xQ,this.listBackup=[],this.thCols=["Id","Profile picture","Last Name","Middle Name","First Name","Mobile Number","City","Adding Type","Actions"],this.avatarImgLocalPath=J.h.avatarImgLocalPath,this.exportBtnLabel=J.h.exportBtnLabel,this.countBox={all:0,active:0,trashed:0},this.contactList=[],this.anouncementsList=[],this.isCheckedAll=!1}return r(e,[{key:"ngOnInit",value:function(){this.index(),this.getContactList(),this.options={width:"300",multiple:!0,tags:!0},this.dtOptions=F.Z.optionsWithoutDownload}},{key:"onFiletreSearch",value:function(){var t=this;if(console.log(this.contact),this.contact.length>0){var e=this.listBackup.filter(function(e){return!!t.contact.find(function(t){return t==e._id})}).map(function(t){return t.city});this.list=this.listBackup.filter(function(t){return!!e.find(function(e){return e==t.city})}),this.dtElement.dtInstance.then(function(e){e.destroy(),t.dtTrigger.next()})}else this.list=this.listBackup,this.dtElement.dtInstance.then(function(e){e.destroy(),t.dtTrigger.next()});console.log(this.list)}},{key:"onClickFilter",value:function(){this.isFilter=!this.isFilter}},{key:"getContactList",value:function(){var t=this;this._contactsService.sIndex().subscribe(function(e){t.contactList=e.data.map(function(t){return{id:t._id,text:t.city}})})}},{key:"onTagChanged",value:function(t){console.log(this.contact)}},{key:"index",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.titlePrefix=e?"Trashed":"Active",this.isSubmitted=!0,this.list=[],this._contactsService.sIndex(e).subscribe(function(e){e&&e.data&&e.data.length?(t.list=e.data,t.listBackup=e.data,console.log("this.list:",t.list),t.countBox.all=t.list.length,t.dtTrigger.next()):s.error("No data found","Error !"),t.isSubmitted=!1},function(e){console.log("Error !"),s.error("No data found","Error !"),t.isSubmitted=!1})}},{key:"edit",value:function(){}},{key:"delete",value:function(t){var e=this;console.log("e:",t),this.isSubmitted=!0,this._contactsService.sDelete(t).subscribe(function(t){console.log("res:",t),e.isSubmitted=!1,e.index(),O.Z.showSweetAlert("Deleted Successfully",!1)},function(t){console.log("err:",t),O.Z.showSweetAlert(t.error.message,!1),e.isSubmitted=!1})}},{key:"trash",value:function(t){var e=this;console.log("e:",t),this.isSubmitted=!0,this._contactsService.sTrash(t).subscribe(function(t){console.log("res:",t),e.isSubmitted=!1,e.index(),O.Z.showSweetAlert("Deleted Successfully",!1)},function(t){console.log("err:",t),O.Z.showSweetAlert(t.error.message,!1),e.isSubmitted=!1})}},{key:"restore",value:function(t){var e=this;console.log("e:",t),this.isSubmitted=!0,this._contactsService.sRestore(t,{}).subscribe(function(t){console.log("res:",t),e.isSubmitted=!1,e.index(),O.Z.showSweetAlert("Restored Successfully",!1)},function(t){console.log("err:",t),O.Z.showSweetAlert(t.error.message,!1),e.isSubmitted=!1})}},{key:"openModal",value:function(t){this.modalRef=this.modalService.show(t)}},{key:"showPopUpToSelectAnnouncemnets",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.selectedContactId=e,this.openModal(t),this.loadAnnouncements()}},{key:"loadAnnouncements",value:function(){var t=this;this.isSubmitted=!0,this.anouncementsList=[],this._announcementsService.sIndex().subscribe(function(e){e&&e.data&&e.data.length&&(t.anouncementsList=e.data),t.isSubmitted=!1},function(e){console.log("Error !"),s.error("No data found","Error !"),t.isSubmitted=!1})}},{key:"sendNotification",value:function(t){return s.success("Notification sent successfully"),this.modalRef.hide(),!1}},{key:"exportToExcel",value:function(){var e=[["Name Of Candidate","Adding Type","Parent Candidate"]].concat(t(this.list.map(function(t){var e=[t.nameOfCandidate,t.addingType];return e.parentCandidate=t.parentCandidateId?t.parentCandidateId.nameOfCandidate:"",e})));(0,L.C)(e,"Hierarchy list")}},{key:"onChangeCheckbox",value:function(t,e){console.log("e:",t);var i=this.list[e];i.isChecked=!i.isChecked,i.isChecked||(this.isCheckedAll=!1)}},{key:"onToggleAllCheckBoxes",value:function(t){this.isCheckedAll=!!t.target.checked,console.log("e:=ALL==",t),this.list.forEach(this.isCheckedAll?function(t){t.isChecked=!0}:function(t){t.isChecked=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(h.P),c.Y36(R.tT),c.Y36(B.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-list-hierarchy"]],viewQuery:function(t,e){var i;(1&t&&c.Gf(Q.G,5),2&t)&&(c.iGM(i=c.CRH())&&(e.dtElement=i.first))},decls:31,vars:18,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["type","button","queryParamsHandling","merge",1,"btn","btn-info","btn-sm","rounded-pill",3,"routerLink","queryParams"],[1,"card-body"],[1,"table-responsive"],[1,"row","mb-1"],[1,"col-8"],[1,"col-4","text-right"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"click"],["class","row",4,"ngIf"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],["template",""],[1,"row"],[1,"col-12","text-right","d-flex","posi","mb-2"],[1,"lebel","mr-2"],["for",""],[1,"control"],["width","100%",3,"ngModel","data","options","placeholder","ngModelChange","valueChanged"],[1,"search-button"],["type","button",1,"btn","btn-sm","btn-primary"],[1,"fa","fa-search",3,"click"],["scope","col"],[4,"ngFor","ngForOf"],["alt","",1,"rounded-circle","i-100","img-thumbnail",3,"src"],["actionType","view",3,"link"],["actionType","edit",3,"link"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"table","table-striped","table-bordered","compact","table-sm"]],template:function(t,e){1&t&&(c.YNc(0,G,1,0,"v-loader",0),c.TgZ(1,"div",1),c._UZ(2,"app-header"),c._UZ(3,"app-sidebar"),c.TgZ(4,"div",2),c._UZ(5,"app-content-header",3),c.TgZ(6,"section",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"h3",7),c._uU(10),c.qZA(),c.TgZ(11,"div",8),c.TgZ(12,"button",9),c._uU(13,"Add Single"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",10),c.TgZ(15,"div",11),c.TgZ(16,"div",12),c._UZ(17,"div",13),c.TgZ(18,"div",14),c.TgZ(19,"button",15),c.NdJ("click",function(){return e.onClickFilter()}),c.TgZ(20,"b"),c._uU(21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(22,P,10,4,"div",16),c.TgZ(23,"table",17),c.TgZ(24,"thead",18),c.TgZ(25,"tr"),c.YNc(26,D,2,1,"th",19),c.qZA(),c.qZA(),c.YNc(27,z,2,1,"tbody",0),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(28,"app-footer"),c.qZA(),c.YNc(29,W,13,3,"ng-template",null,20,c.W1O)),2&t&&(c.Q6J("ngIf",e.isSubmitted),c.xp6(5),c.Q6J("title",e.title)("canshowBreadCrumb",!0),c.xp6(1),c.Q6J("@slideFromRight",void 0),c.xp6(4),c.lnq(" ",e.titlePrefix," List ",e.title," (",e.list.length,") "),c.xp6(2),c.Q6J("routerLink",c.VKq(15,tt,e.addLink))("queryParams",c.DdM(17,et)),c.xp6(9),c.Oqu(e.isFilter?"Cancel":"Filter"),c.xp6(1),c.Q6J("ngIf",e.isFilter),c.xp6(1),c.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c.xp6(3),c.Q6J("ngForOf",e.thCols),c.xp6(1),c.Q6J("ngIf",e.list&&e.list.length))},directives:[a.O5,v.G,b.k,y.e,f.rH,Q.G,a.sg,T.c,q.O,E.c,l.JJ,l.On,A.K],styles:[".posi[_ngcontent-%COMP%]{justify-content:end;align-items:center;margin-bottom:10px}"],data:{animation:[(0,I.X$)("slideFromRight",[(0,I.eR)("void=>*",[(0,I.oB)({opacity:0,transform:"translateX(100%)"}),(0,I.jt)(".8s",(0,I.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),e}(),nt=o(15842);function rt(t,e){1&t&&c._UZ(0,"v-loader")}function ot(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1," addingType is Required "),c.qZA())}function at(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1," relation is Required "),c.qZA())}function lt(t,e){if(1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",15),c.TgZ(2,"label",16),c._uU(3,"Select Relation TYpe"),c.qZA(),c.TgZ(4,"select",26),c.TgZ(5,"option",18),c._uU(6,"--Select--"),c.qZA(),c.TgZ(7,"option",27),c._uU(8),c.qZA(),c.TgZ(9,"option",28),c._uU(10),c.qZA(),c.TgZ(11,"option",29),c._uU(12),c.qZA(),c.qZA(),c.YNc(13,at,2,0,"p",0),c.qZA(),c.qZA()),2&t){var i=c.oxw();c.xp6(8),c.Oqu("Father"),c.xp6(2),c.Oqu("Mother"),c.xp6(2),c.Oqu("Brother"),c.xp6(1),c.Q6J("ngIf",i.fCtrls.addingType.dirty&&i.fCtrls.addingType.invalid)}}function st(t,e){if(1&t&&(c.TgZ(0,"option",33),c._uU(1),c.qZA()),2&t){var i=e.$implicit;c.Q6J("value",i._id),c.xp6(1),c.Oqu(i.nameOfCandidate)}}function ct(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1," parent is Required "),c.qZA())}function ut(t,e){if(1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",15),c.TgZ(2,"label",16),c._uU(3,"Select Parent"),c.qZA(),c.TgZ(4,"select",30),c.TgZ(5,"option",31),c._uU(6,"--Select--"),c.qZA(),c.YNc(7,st,2,2,"option",32),c.qZA(),c.YNc(8,ct,2,0,"p",0),c.qZA(),c.qZA()),2&t){var i=c.oxw();c.xp6(7),c.Q6J("ngForOf",i.parentsList),c.xp6(1),c.Q6J("ngIf",i.fCtrls.parentCandidateId.dirty&&i.fCtrls.parentCandidateId.invalid)}}function dt(t,e){1&t&&c._UZ(0,"v-loader")}function pt(t,e){if(1&t&&(c.TgZ(0,"span"),c._UZ(1,"input",17),c.qZA()),2&t){var i=c.oxw();c.xp6(1),c.Q6J("value",i.uplineMember.uplineContact.name)}}function ft(t,e){if(1&t&&(c.TgZ(0,"div",19),c._UZ(1,"input",17),c.qZA()),2&t){var i=e.$implicit;c.xp6(1),c.Q6J("value",i.name)}}function ht(t,e){if(1&t&&(c.TgZ(0,"span",14),c.YNc(1,ft,2,1,"div",18),c.qZA()),2&t){var i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.uplineMember.downlineContacts)}}function gt(t,e){if(1&t&&(c.TgZ(0,"div",21),c.TgZ(1,"span"),c.TgZ(2,"label",22),c._uU(3),c.qZA(),c._UZ(4,"input",23),c.qZA(),c.TgZ(5,"span"),c.TgZ(6,"label",22),c._uU(7),c.qZA(),c._UZ(8,"input",24),c.qZA(),c.qZA()),2&t){var i=e.$implicit;c.xp6(3),c.Oqu("Relationship Type"),c.xp6(1),c.Q6J("value",i.relationType),c.xp6(3),c.Oqu("Relationship Name"),c.xp6(1),c.Q6J("value",i.relationalPerson.name)}}function mt(t,e){if(1&t&&(c.TgZ(0,"span"),c.YNc(1,gt,9,4,"div",20),c.qZA()),2&t){var i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.familyMember)}}var Zt,vt,bt,yt=[{path:"",component:it,pathMatch:"full"},{path:"create",component:(vt=function(){function t(e,n,r){i(this,t),this._hierarchyService=e,this._router=n,this._formBuilder=r,this.isSubmitted=!1,this.title="Hierarchy Candidate",this.backLink="/hierarchy-management",this.addForm=this._formBuilder.group({nameOfCandidate:["candidate1",l.kI.required],addingType:[null,l.kI.required],relationType:[null],parentCandidateId:["-1"],relationDetails:new l.Oe([])}),this.parentsList=[],this.isAddingDownline=!1,this.isRelationShip=!1}return r(t,[{key:"ngOnInit",value:function(){this.loadPreantsList()}},{key:"fCtrls",get:function(){return this.addForm.controls}},{key:"createRelationArray",value:function(){return this._formBuilder.group({relationType:["",l.kI.required],relationName:["",l.kI.required]})}},{key:"addRelation",value:function(){this.getFormArray().push(this.createRelationArray())}},{key:"getFormArray",value:function(){return this.addForm.get("relationDetails")}},{key:"onSubmit",value:function(){var t=this;console.log(this.addForm.value),this.isSubmitted=!0,this._hierarchyService.sStore(this.addForm.value).subscribe(function(e){t.isSubmitted=!1,t._router.navigateByUrl(t.backLink)},function(e){t.isSubmitted=!1})}},{key:"onChangeAddingType",value:function(t){this.isAddingDownline="downline"==t,this.isAddingDownline=!1,this.isRelationShip=!1,"downline"==t?(this.fCtrls.parentCandidateId.setValidators([l.kI.required]),this.fCtrls.parentCandidateId.updateValueAndValidity(),this.isAddingDownline=!0):"upline"==t?(this.isAddingDownline=!1,this.isRelationShip=!1):"relationship"==t&&(this.fCtrls.addingType.setValidators([l.kI.required]),this.fCtrls.addingType.updateValueAndValidity(),this.isRelationShip=!0)}},{key:"loadPreantsList",value:function(){var t=this;this.isSubmitted=!0,this.parentsList=[],this._hierarchyService.sIndex().subscribe(function(e){e&&e.data&&e.data.length&&(t.parentsList=e.data),t.isSubmitted=!1},function(e){console.log("Error !"),s.error("No data found","Error !"),t.isSubmitted=!1})}}]),t}(),vt.\u0275fac=function(t){return new(t||vt)(c.Y36(p),c.Y36(f.F0),c.Y36(l.qu))},vt.\u0275cmp=c.Xpm({type:vt,selectors:[["app-add-hierarchy"]],decls:39,vars:11,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","nameOfCandidate","label","Candidate Name",3,"fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["name","","id","","formControlName","addingType",1,"form-control",3,"change"],["value","null","disabled",""],["value","downline"],["value","upline"],["value","relationship"],["formArrayName","relationDetails"],["class","col-md-6",4,"ngIf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["name","","id","","formControlName","relationType",1,"form-control"],["value","father"],["value","mother"],["value","brother"],["name","","id","","formControlName","relationName",1,"form-control"],["value","-1","disabled",""],["value","upline",3,"value",4,"ngFor","ngForOf"],["value","upline",3,"value"]],template:function(t,e){1&t&&(c.YNc(0,rt,1,0,"v-loader",0),c.TgZ(1,"div",1),c._UZ(2,"app-header"),c._UZ(3,"app-sidebar"),c.TgZ(4,"div",2),c._UZ(5,"app-content-header",3),c.TgZ(6,"section",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"h3",7),c._uU(10),c.qZA(),c.TgZ(11,"div",8),c._UZ(12,"v-btn",9),c.qZA(),c.qZA(),c.TgZ(13,"div",10),c.TgZ(14,"form",11),c.TgZ(15,"div",12),c.TgZ(16,"div",13),c._UZ(17,"app-v-input-full",14),c.qZA(),c.TgZ(18,"div",13),c.TgZ(19,"div",15),c.TgZ(20,"label",16),c._uU(21,"Adding Type"),c.qZA(),c.TgZ(22,"select",17),c.NdJ("change",function(t){return e.onChangeAddingType(t.target.value)}),c.TgZ(23,"option",18),c._uU(24,"--Select--"),c.qZA(),c.TgZ(25,"option",19),c._uU(26,"Downline"),c.qZA(),c.TgZ(27,"option",20),c._uU(28,"Upline"),c.qZA(),c.TgZ(29,"option",21),c._uU(30,"Relationship"),c.qZA(),c.qZA(),c.YNc(31,ot,2,0,"p",0),c.qZA(),c.qZA(),c.TgZ(32,"div",22),c.YNc(33,lt,14,4,"div",23),c.YNc(34,ut,9,2,"div",23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"div",24),c.TgZ(36,"button",25),c.NdJ("click",function(){return e.onSubmit()}),c._uU(37,"Submit"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(38,"app-footer"),c.qZA()),2&t&&(c.Q6J("ngIf",e.isSubmitted),c.xp6(5),c.Q6J("title",e.title)("canshowBreadCrumb",!0),c.xp6(5),c.hij("Add ",e.title,""),c.xp6(2),c.Q6J("link",e.backLink),c.xp6(2),c.Q6J("formGroup",e.addForm),c.xp6(3),c.Q6J("fGroup",e.addForm),c.xp6(14),c.Q6J("ngIf",e.fCtrls.addingType.dirty&&e.fCtrls.addingType.invalid),c.xp6(2),c.Q6J("ngIf",e.isRelationShip),c.xp6(1),c.Q6J("ngIf",e.isAddingDownline||e.isRelationShip),c.xp6(2),c.Q6J("disabled",!e.addForm.valid))},directives:[a.O5,v.G,b.k,y.e,A.K,l._Y,l.JL,l.sg,nt.a,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.CE,T.c,q.O,a.sg],styles:[""]}),vt)},{path:":id",component:(Zt=function(){function t(e,n,r){i(this,t),this._activatedRoute=e,this._contactsService=n,this._familyService=r,this.backUrl="/hierarchy-management",this.isSubmitted=!1,this.title="Hierarchy Management",this.selectedId=this._activatedRoute.snapshot.params.id,this.getContactInfo(this.selectedId)}return r(t,[{key:"ngOnInit",value:function(){this.getAllFamilyMembers(this.selectedId)}},{key:"getAllFamilyMembers",value:function(t){var e=this;this._familyService.sGetFamilyMember(t).subscribe(function(t){e.familyMember=t.data,console.log("family:",e.familyMember)})}},{key:"getContactInfo",value:function(t){var e=this;this._contactsService.sShow(t).subscribe(function(t){e.uplineMember=t.data,console.log("upline member:",e.uplineMember)},function(t){console.log(t)})}}]),t}(),Zt.\u0275fac=function(t){return new(t||Zt)(c.Y36(f.gz),c.Y36(h.P),c.Y36(g))},Zt.\u0275cmp=c.Xpm({type:Zt,selectors:[["app-view-hierarchy"]],decls:29,vars:8,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[1,"row"],["for","upline",1,"col-4"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"col-4"],[1,"card-footer","text-right"],["type","text","name","uplinMembr","id","uplinMembr","disabled","",3,"value"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],["class","m-1 col-12",4,"ngFor","ngForOf"],[1,"m-1","col-12"],["for","relationshipType"],["type","text","name","familyDetails","id","familyDetails","disabled","",1,"ml-2","mt-1","mb-1","mr-2",3,"value"],["type","text","name","familyNamw","id","familyNamw","disabled","",1,"ml-2","mt-1","mb-1","mr-2",3,"value"]],template:function(t,e){1&t&&(c.YNc(0,dt,1,0,"v-loader",0),c.TgZ(1,"div",1),c._UZ(2,"app-header"),c._UZ(3,"app-sidebar"),c.TgZ(4,"div",2),c._UZ(5,"app-content-header",3),c.TgZ(6,"section",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"h3",7),c._uU(10),c.qZA(),c.TgZ(11,"div",8),c._UZ(12,"v-btn",9),c.qZA(),c.qZA(),c.TgZ(13,"div",10),c.TgZ(14,"form"),c.TgZ(15,"div",11),c.TgZ(16,"label",12),c._uU(17,"Upline Member"),c.qZA(),c.YNc(18,pt,2,1,"span",0),c.qZA(),c.TgZ(19,"div",11),c.TgZ(20,"label",12),c._uU(21,"Downline Member"),c.qZA(),c.YNc(22,ht,2,1,"span",13),c.qZA(),c.TgZ(23,"div",14),c.TgZ(24,"h4",15),c._uU(25,"Family Members"),c.qZA(),c.YNc(26,mt,2,1,"span",0),c.qZA(),c.qZA(),c.qZA(),c._UZ(27,"div",16),c.qZA(),c.qZA(),c.qZA(),c._UZ(28,"app-footer"),c.qZA()),2&t&&(c.Q6J("ngIf",e.isSubmitted),c.xp6(5),c.Q6J("title",e.title)("canshowBreadCrumb",!0),c.xp6(5),c.hij("View Hieratchy of ",e.uplineMember.name,""),c.xp6(2),c.Q6J("link",e.backUrl),c.xp6(6),c.Q6J("ngIf",e.uplineMember.uplineContact),c.xp6(4),c.Q6J("ngIf",e.uplineMember.downlineContacts),c.xp6(4),c.Q6J("ngIf",e.familyMember.length>0))},directives:[a.O5,v.G,b.k,y.e,A.K,l._Y,l.JL,l.F,T.c,q.O,a.sg],styles:[""]}),Zt)},{path:":id/edit",component:N}],At=function(){var t=function t(){i(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[f.Bz.forChild(yt)],f.Bz]}),t}(),Tt=o(47635),qt=((bt=function t(){i(this,t)}).\u0275fac=function(t){return new(t||bt)},bt.\u0275mod=c.oAB({type:bt}),bt.\u0275inj=c.cJS({imports:[[a.ez,At,Tt.m,E.I,Z.zk]]}),bt)}}])}();