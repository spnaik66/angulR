(self.webpackChunkschool_ang_proj=self.webpackChunkschool_ang_proj||[]).push([[558],{81558:function(t,e,i){"use strict";i.r(e),i.d(e,{HierarchyManagementModule:function(){return ft}});var n=i(61116),o=i(11462),r=i(85907),s=i(87368),a=i(42693),l=i(17145);let d=(()=>{class t{constructor(t){this._httpClient=t,this.url=l.A.HIERARCHY}sIndex(){return this._httpClient.get(this.url)}sStore(t){let e=Object.assign({},t);return this._httpClient.post(this.url,e)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sSendNotifications(t){return this._httpClient.get(this.url+"/"+t)}upload(t){const e=new FormData;e.append("file",t);const i=new a.aW("POST",`${this.url}/bulk-import`,e,{reportProgress:!0,responseType:"json"});return this._httpClient.request(i)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(a.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=i(89264),u=i(905);i(90750);let p=(()=>{class t{constructor(t){this._httpClient=t,this.url=l.A.FAMILY_MEMBER}sIndex(t=null){console.log("sIndex");let e=this.url;return t&&(e=e+"?type="+t),this._httpClient.get(e)}sStore(t){return this._httpClient.post(this.url,t)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sGetFamilyMember(t){return this._httpClient.get(this.url+"/members/"+t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(a.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i(37205),g=i(35703),m=i(80570),Z=i(23458),f=i(12937),b=i(98911),A=i(32370),T=i(22041);const q=["myModal"];function v(t,e){1&t&&s._UZ(0,"v-loader")}function y(t,e){if(1&t&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t._id),s.xp6(1),s.lnq(" ",t.name," - ",t.contactNumber,"- ",t.permanentAddress," ")}}function _(t,e){if(1&t&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.familyName),s.xp6(1),s.hij(" ",t.familyName," ")}}function x(t,e){if(1&t&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t._id),s.xp6(1),s.lnq(" ",t.name," - ",t.contactNumber,"- ",t.permanentAddress," ")}}function C(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",48),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).addMember()}),s._uU(1," Add "),s.qZA()}}function S(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",49),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().index;return s.oxw().deleteMember(e)}),s._uU(1," Delete "),s.qZA()}}function U(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",33),s.TgZ(2,"div",11),s.TgZ(3,"div",34),s.TgZ(4,"div",35),s.TgZ(5,"div",36),s.TgZ(6,"div",37),s.TgZ(7,"select",38),s.TgZ(8,"option",32),s._uU(9,"--Select--"),s.qZA(),s.YNc(10,_,2,2,"option",16),s.qZA(),s.qZA(),s.TgZ(11,"div",39),s.TgZ(12,"button",30),s.NdJ("click",function(){return s.CHM(t),s.oxw().onClickHandlier()}),s._UZ(13,"div",40),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",41),s.TgZ(15,"div",35),s.TgZ(16,"select",42),s.TgZ(17,"option",43),s._uU(18,"--Select--"),s.qZA(),s.YNc(19,x,2,4,"option",16),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",44),s.YNc(21,C,2,0,"button",45),s.qZA(),s.TgZ(22,"div",46),s.YNc(23,S,2,0,"button",47),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.index,i=s.oxw();s.xp6(1),s.Q6J("formGroupName",t),s.xp6(7),s.Q6J("value",null),s.xp6(2),s.Q6J("ngForOf",i.list),s.xp6(7),s.Q6J("value",null),s.xp6(2),s.Q6J("ngForOf",i.contactlist),s.xp6(2),s.Q6J("ngIf",i.forArray.controls.length===t+1),s.xp6(2),s.Q6J("ngIf",t>0)}}let w=(()=>{class t{constructor(t,e,i,n,o,r){this._hierarchyService=t,this._activatedRoute=e,this._contactsService=i,this._familyService=n,this.familyMasterServiceService=o,this.modalService=r,this.isSubmitted=!1,this.title="Hierarchy Candidate",this.backLink="/hierarchy-management",this.contactlist=[],this.isAddingDownline=!1,this.isRelationShip=!1,this.list=[],this.uplineMember="",this.groupName="",this.selectedId=this._activatedRoute.snapshot.params.id,this.getAllContacts(),this.getContactInfo(this.selectedId)}ngOnInit(){this.form=new o.cw({femilyList:new o.Oe([],o.kI.required)}),this.addMember(),this.getAllFamilyMembers(this.selectedId),this.indexGroup()}get forArray(){return this.form.get("femilyList")}addMember(){const t=new o.cw({member:new o.NI(null,o.kI.required),relation:new o.NI(null,o.kI.required)});this.forArray.push(t)}indexGroup(){this.isSubmitted=!0,this.list=[],this.familyMasterServiceService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.list=t.data),this.isSubmitted=!1},t=>{console.log(t),r.error("No data found","Error !"),this.isSubmitted=!1})}deleteMember(t){this.forArray.removeAt(t)}getAllFamilyMembers(t){this._familyService.sGetFamilyMember(t).subscribe(t=>{})}getContactInfo(t){this._contactsService.sShow(t).subscribe(t=>{this.uplineMember=t.data.uplineContact._id},t=>{console.log(t)})}getAllContacts(){this._contactsService.sIndex().subscribe(t=>{this.contactlist=t.data},t=>{console.log(t)})}updateUplinemember(){this.uplineMember=this.uplineMember.trim(),this._contactsService.setUplineMember(this.selectedId,{uplineContact:this.uplineMember}).subscribe(t=>{r.success("Upline Member Updated Successfully")})}onAddFamilyMember(){const t=[];this.forArray.controls.forEach(e=>{t.push({person:this.selectedId,relationalPerson:e.value.member,relationType:e.value.relation})}),this._familyService.sStore(t).subscribe(t=>{this.indexGroup(),this.modalService.close(this.myModal),r.success("Family Member Added Successfully")})}Add(){const t={familyName:this.groupName};this.isSubmitted=!0,this.familyMasterServiceService.sStore(t).subscribe(t=>{this.isSubmitted=!1,this.modalService.close(this.myModal)},t=>{this.isSubmitted=!1})}onClickHandlier(){this.modalService.open(this.myModal,{size:"md"})}closeModal(){this.modalService.close(this.myModal)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(d),s.Y36(c.gz),s.Y36(u.P),s.Y36(p),s.Y36(h.f),s.Y36(g.gk))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-edit-hierarchy"]],viewQuery:function(t,e){if(1&t&&s.Gf(q,5),2&t){let t;s.iGM(t=s.CRH())&&(e.myModal=t.first)}},decls:57,vars:10,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[1,"row"],[1,"col-md-6"],["for","upline"],["name","upline","id","upline",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","mt-2"],["for","upline",1,"pt-1"],[1,"btn","btn-primary","mt-4",3,"click"],["id","familymember",1,"mt-4",3,"formGroup"],[1,"col-6"],[1,"col-5"],["formArrayName","femilyList"],[4,"ngFor","ngForOf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["myModal",""],["for",""],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mr-1",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"value"],[3,"formGroupName"],[1,"col-md-5"],[1,"form-group"],[1,"group-position"],[1,"control",2,"flex","1"],["name","","id","","formControlName","relation",1,"form-control"],[1,"search-button"],[1,"fa","fa-plus"],[1,"col-md-4"],["name","","id","","formControlName","member",1,"form-control"],["disabled","",3,"value"],[1,"com-md-1"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"com-md-1","ml-1"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(t,e){1&t&&(s.YNc(0,v,1,0,"v-loader",0),s.TgZ(1,"div",1),s._UZ(2,"app-header"),s._UZ(3,"app-sidebar"),s.TgZ(4,"div",2),s._UZ(5,"app-content-header",3),s.TgZ(6,"section",4),s.TgZ(7,"div",5),s.TgZ(8,"div",6),s.TgZ(9,"h3",7),s._uU(10),s.qZA(),s.TgZ(11,"div",8),s._UZ(12,"v-btn",9),s.qZA(),s.qZA(),s.TgZ(13,"div",10),s.TgZ(14,"form"),s.TgZ(15,"div",11),s.TgZ(16,"div",12),s.TgZ(17,"label",13),s._uU(18,"Upline Member"),s.qZA(),s.TgZ(19,"select",14),s.NdJ("ngModelChange",function(t){return e.uplineMember=t}),s.TgZ(20,"option",15),s._uU(21,"Select Upline Member"),s.qZA(),s.YNc(22,y,2,4,"option",16),s.qZA(),s.qZA(),s.TgZ(23,"div",17),s._UZ(24,"label",18),s.TgZ(25,"button",19),s.NdJ("click",function(){return e.updateUplinemember()}),s._uU(26," Update Upline "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"form",20),s.TgZ(28,"h5"),s._uU(29,"Family Mambers"),s.qZA(),s.TgZ(30,"div",11),s.TgZ(31,"div",21),s.TgZ(32,"b"),s._uU(33,"Relation Type"),s.qZA(),s.qZA(),s.TgZ(34,"div",22),s.TgZ(35,"b"),s._uU(36,"Member Name"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(37,"div",23),s.YNc(38,U,24,7,"div",24),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"div",25),s.TgZ(40,"button",26),s.NdJ("click",function(){return e.onAddFamilyMember()}),s._uU(41," Update "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(42,"app-footer"),s.qZA(),s.TgZ(43,"modal",null,27),s.TgZ(45,"modal-header"),s.TgZ(46,"h1"),s._uU(47,"Add Family"),s.qZA(),s.qZA(),s.TgZ(48,"modal-content"),s.TgZ(49,"label",28),s._uU(50,"Family Type"),s.qZA(),s.TgZ(51,"input",29),s.NdJ("ngModelChange",function(t){return e.groupName=t}),s.qZA(),s.qZA(),s.TgZ(52,"modal-footer"),s.TgZ(53,"button",30),s.NdJ("click",function(){return e.Add()}),s._uU(54,"Add"),s.qZA(),s.TgZ(55,"button",31),s.NdJ("click",function(){return e.closeModal()}),s._uU(56,"close"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("ngIf",e.isSubmitted),s.xp6(5),s.Q6J("title",e.title)("canshowBreadCrumb",!0),s.xp6(5),s.hij("Edit ",e.title,""),s.xp6(2),s.Q6J("link",e.backLink),s.xp6(7),s.Q6J("ngModel",e.uplineMember),s.xp6(3),s.Q6J("ngForOf",e.contactlist),s.xp6(5),s.Q6J("formGroup",e.form),s.xp6(11),s.Q6J("ngForOf",e.forArray.controls),s.xp6(13),s.Q6J("ngModel",e.groupName))},directives:[n.O5,m.G,Z.k,f.e,b.K,o._Y,o.JL,o.F,o.EJ,o.JJ,o.On,o.YN,o.Kr,n.sg,o.sg,o.CE,A.c,g.zS,g.Rb,g.Ef,o.Fj,g.YI,T.O,o.x0,o.u],styles:[".group-position[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end;align-items:center;margin-bottom:10px}"]}),t})();var k=i(99713),M=i(70118),N=i(71397),J=i(86659),I=i(54733),F=i(83559),O=i(72644),Q=i(75470),Y=i(739),L=i(68281);function R(t,e){1&t&&s._UZ(0,"v-loader")}function B(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",21),s.TgZ(1,"div",22),s.TgZ(2,"div",23),s.TgZ(3,"label",24),s._uU(4,"City"),s.qZA(),s.qZA(),s.TgZ(5,"div",25),s.TgZ(6,"ng-select2",26),s.NdJ("ngModelChange",function(e){return s.CHM(t),s.oxw().contact=e})("valueChanged",function(e){return s.CHM(t),s.oxw().onTagChanged(e)}),s.qZA(),s.qZA(),s.TgZ(7,"div",27),s.TgZ(8,"button",28),s.TgZ(9,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().onFiletreSearch()}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngModel",t.contact)("data",t.contactList)("options",t.options)("placeholder","select city")}}function E(t,e){if(1&t&&(s.TgZ(0,"th",30),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t," ")}}const G=function(t,e){return[t,e]},D=function(t,e){return[t,e,"edit"]};function H(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._UZ(4,"img",32),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.TgZ(13,"td"),s._uU(14),s.qZA(),s.TgZ(15,"td"),s._uU(16),s.qZA(),s.TgZ(17,"td"),s.TgZ(18,"div"),s._UZ(19,"v-btn",33),s._UZ(20,"v-btn",34),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit,i=e.index,n=s.oxw(2);let o;s.xp6(2),s.Oqu(i+1),s.xp6(2),s.s9C("src",null!==(o=t.profilePictureUrl)&&void 0!==o?o:n.avatarImgLocalPath,s.LSH),s.xp6(2),s.Oqu(t.surname),s.xp6(2),s.Oqu(t.middleName),s.xp6(2),s.Oqu(t.name),s.xp6(2),s.Oqu(t.phoneNumber),s.xp6(2),s.Oqu(t.city),s.xp6(2),s.Oqu(t.addType),s.xp6(3),s.Q6J("link",s.WLB(10,G,n.editLink,t._id)),s.xp6(1),s.Q6J("link",s.WLB(13,D,n.editLink,t._id))}}function P(t,e){if(1&t&&(s.TgZ(0,"tbody"),s.YNc(1,H,21,16,"tr",31),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.list)}}function j(t,e){if(1&t&&(s.TgZ(0,"th",30),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t," ")}}function $(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s.TgZ(8,"button",15),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).sendNotification(e._id)}),s._uU(9," Send "),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,i=e.index;s.xp6(2),s.Oqu(i+1),s.xp6(2),s.Oqu(t.name),s.xp6(2),s.Oqu(t.message)}}const z=function(){return["Id","Name","Message","Actions"]};function V(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",35),s.TgZ(1,"h4",36),s._uU(2,"Select Annoucements"),s.qZA(),s.TgZ(3,"button",37),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return null==e.modalRef?null:e.modalRef.hide()}),s.TgZ(4,"span",38),s._uU(5,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",39),s.TgZ(7,"table",40),s.TgZ(8,"thead",18),s.TgZ(9,"tr"),s.YNc(10,j,2,1,"th",19),s.qZA(),s.qZA(),s.TgZ(11,"tbody"),s.YNc(12,$,10,3,"tr",31),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(10),s.Q6J("ngForOf",s.DdM(2,z)),s.xp6(2),s.Q6J("ngForOf",t.anouncementsList)}}const K=function(t){return[t]},X=function(){return{mode:"hierarchy"}};let W=(()=>{class t{constructor(t,e,i){this._contactsService=t,this.modalService=e,this._announcementsService=i,this.isFilter=!1,this.isSubmitted=!1,this.title="Hierarchy Management",this.addLink="/contact-management/contacts/create",this.editLink="/hierarchy-management",this.list=[],this.dtOptions={},this.dtTrigger=new F.xQ,this.listBackup=[],this.thCols=["Id","Profile picture","Last Name","Middle Name","First Name","Mobile Number","City","Adding Type","Actions"],this.avatarImgLocalPath=M.h.avatarImgLocalPath,this.exportBtnLabel=M.h.exportBtnLabel,this.countBox={all:0,active:0,trashed:0},this.contactList=[],this.anouncementsList=[],this.isCheckedAll=!1}ngOnInit(){this.index(),this.getContactList(),this.options={width:"300",multiple:!0,tags:!0},this.dtOptions=N.Z.optionsWithoutDownload}onFiletreSearch(){if(console.log(this.contact),this.contact.length>0){const t=this.listBackup.filter(t=>!!this.contact.find(e=>e==t._id)).map(t=>t.city);this.list=this.listBackup.filter(e=>!!t.find(t=>t==e.city)),this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}else this.list=this.listBackup,this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()});console.log(this.list)}onClickFilter(){this.isFilter=!this.isFilter}getContactList(){this._contactsService.sIndex().subscribe(t=>{this.contactList=t.data.map(t=>({id:t._id,text:t.city}))})}onTagChanged(t){console.log(this.contact)}index(t=null){this.titlePrefix=t?"Trashed":"Active",this.isSubmitted=!0,this.list=[],this._contactsService.sIndex(t).subscribe(t=>{t&&t.data&&t.data.length?(this.list=t.data,this.listBackup=t.data,console.log("this.list:",this.list),this.countBox.all=this.list.length,this.dtTrigger.next()):r.error("No data found","Error !"),this.isSubmitted=!1},t=>{console.log("Error !"),r.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._contactsService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),J.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),J.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}trash(t){console.log("e:",t),this.isSubmitted=!0,this._contactsService.sTrash(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),J.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),J.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}restore(t){console.log("e:",t),this.isSubmitted=!0,this._contactsService.sRestore(t,{}).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),J.Z.showSweetAlert("Restored Successfully",!1)},t=>{console.log("err:",t),J.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}openModal(t){this.modalRef=this.modalService.show(t)}showPopUpToSelectAnnouncemnets(t,e=null){this.selectedContactId=e,this.openModal(t),this.loadAnnouncements()}loadAnnouncements(){this.isSubmitted=!0,this.anouncementsList=[],this._announcementsService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.anouncementsList=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),r.error("No data found","Error !"),this.isSubmitted=!1})}sendNotification(t){return r.success("Notification sent successfully"),this.modalRef.hide(),!1}exportToExcel(){let t=[["Name Of Candidate","Adding Type","Parent Candidate"],...this.list.map(t=>{let e=[t.nameOfCandidate,t.addingType];return e.parentCandidate=t.parentCandidateId?t.parentCandidateId.nameOfCandidate:"",e})];(0,O.C)(t,"Hierarchy list")}onChangeCheckbox(t,e){console.log("e:",t);let i=this.list[e];i.isChecked=!i.isChecked,i.isChecked||(this.isCheckedAll=!1)}onToggleAllCheckBoxes(t){this.isCheckedAll=!!t.target.checked,console.log("e:=ALL==",t),this.list.forEach(this.isCheckedAll?t=>{t.isChecked=!0}:t=>{t.isChecked=!1})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(u.P),s.Y36(Q.tT),s.Y36(Y.f))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-list-hierarchy"]],viewQuery:function(t,e){if(1&t&&s.Gf(I.G,5),2&t){let t;s.iGM(t=s.CRH())&&(e.dtElement=t.first)}},decls:31,vars:18,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["type","button","queryParamsHandling","merge",1,"btn","btn-info","btn-sm","rounded-pill",3,"routerLink","queryParams"],[1,"card-body"],[1,"table-responsive"],[1,"row","mb-1"],[1,"col-8"],[1,"col-4","text-right"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"click"],["class","row",4,"ngIf"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],["template",""],[1,"row"],[1,"col-12","text-right","d-flex","posi","mb-2"],[1,"lebel","mr-2"],["for",""],[1,"control"],["width","100%",3,"ngModel","data","options","placeholder","ngModelChange","valueChanged"],[1,"search-button"],["type","button",1,"btn","btn-sm","btn-primary"],[1,"fa","fa-search",3,"click"],["scope","col"],[4,"ngFor","ngForOf"],["alt","",1,"rounded-circle","i-100","img-thumbnail",3,"src"],["actionType","view",3,"link"],["actionType","edit",3,"link"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"table","table-striped","table-bordered","compact","table-sm"]],template:function(t,e){1&t&&(s.YNc(0,R,1,0,"v-loader",0),s.TgZ(1,"div",1),s._UZ(2,"app-header"),s._UZ(3,"app-sidebar"),s.TgZ(4,"div",2),s._UZ(5,"app-content-header",3),s.TgZ(6,"section",4),s.TgZ(7,"div",5),s.TgZ(8,"div",6),s.TgZ(9,"h3",7),s._uU(10),s.qZA(),s.TgZ(11,"div",8),s.TgZ(12,"button",9),s._uU(13,"Add Single"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",10),s.TgZ(15,"div",11),s.TgZ(16,"div",12),s._UZ(17,"div",13),s.TgZ(18,"div",14),s.TgZ(19,"button",15),s.NdJ("click",function(){return e.onClickFilter()}),s.TgZ(20,"b"),s._uU(21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(22,B,10,4,"div",16),s.TgZ(23,"table",17),s.TgZ(24,"thead",18),s.TgZ(25,"tr"),s.YNc(26,E,2,1,"th",19),s.qZA(),s.qZA(),s.YNc(27,P,2,1,"tbody",0),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(28,"app-footer"),s.qZA(),s.YNc(29,V,13,3,"ng-template",null,20,s.W1O)),2&t&&(s.Q6J("ngIf",e.isSubmitted),s.xp6(5),s.Q6J("title",e.title)("canshowBreadCrumb",!0),s.xp6(1),s.Q6J("@slideFromRight",void 0),s.xp6(4),s.lnq(" ",e.titlePrefix," List ",e.title," (",e.list.length,") "),s.xp6(2),s.Q6J("routerLink",s.VKq(15,K,e.addLink))("queryParams",s.DdM(17,X)),s.xp6(9),s.Oqu(e.isFilter?"Cancel":"Filter"),s.xp6(1),s.Q6J("ngIf",e.isFilter),s.xp6(1),s.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),s.xp6(3),s.Q6J("ngForOf",e.thCols),s.xp6(1),s.Q6J("ngIf",e.list&&e.list.length))},directives:[n.O5,m.G,Z.k,f.e,c.rH,I.G,n.sg,A.c,T.O,L.c,o.JJ,o.On,b.K],styles:[".posi[_ngcontent-%COMP%]{justify-content:end;align-items:center;margin-bottom:10px}"],data:{animation:[(0,k.X$)("slideFromRight",[(0,k.eR)("void=>*",[(0,k.oB)({opacity:0,transform:"translateX(100%)"}),(0,k.jt)(".8s",(0,k.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})();var tt=i(15842);function et(t,e){1&t&&s._UZ(0,"v-loader")}function it(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1," addingType is Required "),s.qZA())}function nt(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1," relation is Required "),s.qZA())}function ot(t,e){if(1&t&&(s.TgZ(0,"div",13),s.TgZ(1,"div",15),s.TgZ(2,"label",16),s._uU(3,"Select Relation TYpe"),s.qZA(),s.TgZ(4,"select",26),s.TgZ(5,"option",18),s._uU(6,"--Select--"),s.qZA(),s.TgZ(7,"option",27),s._uU(8),s.qZA(),s.TgZ(9,"option",28),s._uU(10),s.qZA(),s.TgZ(11,"option",29),s._uU(12),s.qZA(),s.qZA(),s.YNc(13,nt,2,0,"p",0),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(8),s.Oqu("Father"),s.xp6(2),s.Oqu("Mother"),s.xp6(2),s.Oqu("Brother"),s.xp6(1),s.Q6J("ngIf",t.fCtrls.addingType.dirty&&t.fCtrls.addingType.invalid)}}function rt(t,e){if(1&t&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t._id),s.xp6(1),s.Oqu(t.nameOfCandidate)}}function st(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1," parent is Required "),s.qZA())}function at(t,e){if(1&t&&(s.TgZ(0,"div",13),s.TgZ(1,"div",15),s.TgZ(2,"label",16),s._uU(3,"Select Parent"),s.qZA(),s.TgZ(4,"select",30),s.TgZ(5,"option",31),s._uU(6,"--Select--"),s.qZA(),s.YNc(7,rt,2,2,"option",32),s.qZA(),s.YNc(8,st,2,0,"p",0),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(7),s.Q6J("ngForOf",t.parentsList),s.xp6(1),s.Q6J("ngIf",t.fCtrls.parentCandidateId.dirty&&t.fCtrls.parentCandidateId.invalid)}}function lt(t,e){1&t&&s._UZ(0,"v-loader")}function dt(t,e){if(1&t&&(s.TgZ(0,"span"),s._UZ(1,"input",17),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("value",t.uplineMember.uplineContact.name)}}function ct(t,e){if(1&t&&(s.TgZ(0,"div",19),s._UZ(1,"input",17),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("value",t.name)}}function ut(t,e){if(1&t&&(s.TgZ(0,"span",14),s.YNc(1,ct,2,1,"div",18),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.uplineMember.downlineContacts)}}function pt(t,e){if(1&t&&(s.TgZ(0,"div",21),s.TgZ(1,"span"),s.TgZ(2,"label",22),s._uU(3),s.qZA(),s._UZ(4,"input",23),s.qZA(),s.TgZ(5,"span"),s.TgZ(6,"label",22),s._uU(7),s.qZA(),s._UZ(8,"input",24),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(3),s.Oqu("Relationship Type"),s.xp6(1),s.Q6J("value",t.relationType),s.xp6(3),s.Oqu("Relationship Name"),s.xp6(1),s.Q6J("value",t.relationalPerson.name)}}function ht(t,e){if(1&t&&(s.TgZ(0,"span"),s.YNc(1,pt,9,4,"div",20),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.familyMember)}}const gt=[{path:"",component:W,pathMatch:"full"},{path:"create",component:(()=>{class t{constructor(t,e,i){this._hierarchyService=t,this._router=e,this._formBuilder=i,this.isSubmitted=!1,this.title="Hierarchy Candidate",this.backLink="/hierarchy-management",this.addForm=this._formBuilder.group({nameOfCandidate:["candidate1",o.kI.required],addingType:[null,o.kI.required],relationType:[null],parentCandidateId:["-1"],relationDetails:new o.Oe([])}),this.parentsList=[],this.isAddingDownline=!1,this.isRelationShip=!1}ngOnInit(){this.loadPreantsList()}get fCtrls(){return this.addForm.controls}createRelationArray(){return this._formBuilder.group({relationType:["",o.kI.required],relationName:["",o.kI.required]})}addRelation(){this.getFormArray().push(this.createRelationArray())}getFormArray(){return this.addForm.get("relationDetails")}onSubmit(){console.log(this.addForm.value),this.isSubmitted=!0,this._hierarchyService.sStore(this.addForm.value).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl(this.backLink)},t=>{this.isSubmitted=!1})}onChangeAddingType(t){this.isAddingDownline="downline"==t,this.isAddingDownline=!1,this.isRelationShip=!1,"downline"==t?(this.fCtrls.parentCandidateId.setValidators([o.kI.required]),this.fCtrls.parentCandidateId.updateValueAndValidity(),this.isAddingDownline=!0):"upline"==t?(this.isAddingDownline=!1,this.isRelationShip=!1):"relationship"==t&&(this.fCtrls.addingType.setValidators([o.kI.required]),this.fCtrls.addingType.updateValueAndValidity(),this.isRelationShip=!0)}loadPreantsList(){this.isSubmitted=!0,this.parentsList=[],this._hierarchyService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.parentsList=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),r.error("No data found","Error !"),this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(d),s.Y36(c.F0),s.Y36(o.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-add-hierarchy"]],decls:39,vars:11,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","nameOfCandidate","label","Candidate Name",3,"fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["name","","id","","formControlName","addingType",1,"form-control",3,"change"],["value","null","disabled",""],["value","downline"],["value","upline"],["value","relationship"],["formArrayName","relationDetails"],["class","col-md-6",4,"ngIf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["name","","id","","formControlName","relationType",1,"form-control"],["value","father"],["value","mother"],["value","brother"],["name","","id","","formControlName","relationName",1,"form-control"],["value","-1","disabled",""],["value","upline",3,"value",4,"ngFor","ngForOf"],["value","upline",3,"value"]],template:function(t,e){1&t&&(s.YNc(0,et,1,0,"v-loader",0),s.TgZ(1,"div",1),s._UZ(2,"app-header"),s._UZ(3,"app-sidebar"),s.TgZ(4,"div",2),s._UZ(5,"app-content-header",3),s.TgZ(6,"section",4),s.TgZ(7,"div",5),s.TgZ(8,"div",6),s.TgZ(9,"h3",7),s._uU(10),s.qZA(),s.TgZ(11,"div",8),s._UZ(12,"v-btn",9),s.qZA(),s.qZA(),s.TgZ(13,"div",10),s.TgZ(14,"form",11),s.TgZ(15,"div",12),s.TgZ(16,"div",13),s._UZ(17,"app-v-input-full",14),s.qZA(),s.TgZ(18,"div",13),s.TgZ(19,"div",15),s.TgZ(20,"label",16),s._uU(21,"Adding Type"),s.qZA(),s.TgZ(22,"select",17),s.NdJ("change",function(t){return e.onChangeAddingType(t.target.value)}),s.TgZ(23,"option",18),s._uU(24,"--Select--"),s.qZA(),s.TgZ(25,"option",19),s._uU(26,"Downline"),s.qZA(),s.TgZ(27,"option",20),s._uU(28,"Upline"),s.qZA(),s.TgZ(29,"option",21),s._uU(30,"Relationship"),s.qZA(),s.qZA(),s.YNc(31,it,2,0,"p",0),s.qZA(),s.qZA(),s.TgZ(32,"div",22),s.YNc(33,ot,14,4,"div",23),s.YNc(34,at,9,2,"div",23),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(35,"div",24),s.TgZ(36,"button",25),s.NdJ("click",function(){return e.onSubmit()}),s._uU(37,"Submit"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(38,"app-footer"),s.qZA()),2&t&&(s.Q6J("ngIf",e.isSubmitted),s.xp6(5),s.Q6J("title",e.title)("canshowBreadCrumb",!0),s.xp6(5),s.hij("Add ",e.title,""),s.xp6(2),s.Q6J("link",e.backLink),s.xp6(2),s.Q6J("formGroup",e.addForm),s.xp6(3),s.Q6J("fGroup",e.addForm),s.xp6(14),s.Q6J("ngIf",e.fCtrls.addingType.dirty&&e.fCtrls.addingType.invalid),s.xp6(2),s.Q6J("ngIf",e.isRelationShip),s.xp6(1),s.Q6J("ngIf",e.isAddingDownline||e.isRelationShip),s.xp6(2),s.Q6J("disabled",!e.addForm.valid))},directives:[n.O5,m.G,Z.k,f.e,b.K,o._Y,o.JL,o.sg,tt.a,o.EJ,o.JJ,o.u,o.YN,o.Kr,o.CE,A.c,T.O,n.sg],styles:[""]}),t})()},{path:":id",component:(()=>{class t{constructor(t,e,i){this._activatedRoute=t,this._contactsService=e,this._familyService=i,this.backUrl="/hierarchy-management",this.isSubmitted=!1,this.title="Hierarchy Management",this.selectedId=this._activatedRoute.snapshot.params.id,this.getContactInfo(this.selectedId)}ngOnInit(){this.getAllFamilyMembers(this.selectedId)}getAllFamilyMembers(t){this._familyService.sGetFamilyMember(t).subscribe(t=>{this.familyMember=t.data,console.log("family:",this.familyMember)})}getContactInfo(t){this._contactsService.sShow(t).subscribe(t=>{this.uplineMember=t.data,console.log("upline member:",this.uplineMember)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.gz),s.Y36(u.P),s.Y36(p))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-view-hierarchy"]],decls:29,vars:8,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[1,"row"],["for","upline",1,"col-4"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"col-4"],[1,"card-footer","text-right"],["type","text","name","uplinMembr","id","uplinMembr","disabled","",3,"value"],["class","mb-1",4,"ngFor","ngForOf"],[1,"mb-1"],["class","m-1 col-12",4,"ngFor","ngForOf"],[1,"m-1","col-12"],["for","relationshipType"],["type","text","name","familyDetails","id","familyDetails","disabled","",1,"ml-2","mt-1","mb-1","mr-2",3,"value"],["type","text","name","familyNamw","id","familyNamw","disabled","",1,"ml-2","mt-1","mb-1","mr-2",3,"value"]],template:function(t,e){1&t&&(s.YNc(0,lt,1,0,"v-loader",0),s.TgZ(1,"div",1),s._UZ(2,"app-header"),s._UZ(3,"app-sidebar"),s.TgZ(4,"div",2),s._UZ(5,"app-content-header",3),s.TgZ(6,"section",4),s.TgZ(7,"div",5),s.TgZ(8,"div",6),s.TgZ(9,"h3",7),s._uU(10),s.qZA(),s.TgZ(11,"div",8),s._UZ(12,"v-btn",9),s.qZA(),s.qZA(),s.TgZ(13,"div",10),s.TgZ(14,"form"),s.TgZ(15,"div",11),s.TgZ(16,"label",12),s._uU(17,"Upline Member"),s.qZA(),s.YNc(18,dt,2,1,"span",0),s.qZA(),s.TgZ(19,"div",11),s.TgZ(20,"label",12),s._uU(21,"Downline Member"),s.qZA(),s.YNc(22,ut,2,1,"span",13),s.qZA(),s.TgZ(23,"div",14),s.TgZ(24,"h4",15),s._uU(25,"Family Members"),s.qZA(),s.YNc(26,ht,2,1,"span",0),s.qZA(),s.qZA(),s.qZA(),s._UZ(27,"div",16),s.qZA(),s.qZA(),s.qZA(),s._UZ(28,"app-footer"),s.qZA()),2&t&&(s.Q6J("ngIf",e.isSubmitted),s.xp6(5),s.Q6J("title",e.title)("canshowBreadCrumb",!0),s.xp6(5),s.hij("View Hieratchy of ",e.uplineMember.name,""),s.xp6(2),s.Q6J("link",e.backUrl),s.xp6(6),s.Q6J("ngIf",e.uplineMember.uplineContact),s.xp6(4),s.Q6J("ngIf",e.uplineMember.downlineContacts),s.xp6(4),s.Q6J("ngIf",e.familyMember.length>0))},directives:[n.O5,m.G,Z.k,f.e,b.K,o._Y,o.JL,o.F,A.c,T.O,n.sg],styles:[""]}),t})()},{path:":id/edit",component:w}];let mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[c.Bz.forChild(gt)],c.Bz]}),t})();var Zt=i(47635);let ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.ez,mt,Zt.m,L.I,g.zk]]}),t})()}}]);