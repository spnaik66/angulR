(self.webpackChunkschool_ang_proj=self.webpackChunkschool_ang_proj||[]).push([[20],{14020:function(t,e,i){"use strict";i.r(e),i.d(e,{InteractionManagementModule:function(){return Ht}});var n=i(61116),o=i(11462),r=i(53647),a=i(87368),s=i(42693),l=i(17145);let c=(()=>{class t{constructor(t){this._httpClient=t,this.url=l.A.INTERACTION_CONTACTS}sIndex(){return this._httpClient.get(this.url)}sStore(t){let e=Object.assign({},t);return this._httpClient.post(this.url,e)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sSendNotifications(t){return this._httpClient.get(this.url+"/"+t)}upload(t){const e=new FormData;e.append("file",t);const i=new s.aW("POST",`${this.url}/bulk-import`,e,{reportProgress:!0,responseType:"json"});return this._httpClient.request(i)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(s.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=i(89264),u=i(80570),p=i(23458),m=i(12937),Z=i(98911),g=i(15842),h=i(32370),f=i(22041);function b(t,e){1&t&&a._UZ(0,"v-loader")}function q(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," email is Required "),a.qZA())}function T(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," contactNumber is Required "),a.qZA())}function A(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionPlace is Required "),a.qZA())}function v(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionPurpose is Required "),a.qZA())}function _(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionType is Required "),a.qZA())}function C(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionDate is Required "),a.qZA())}function x(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Notes is Required "),a.qZA())}let U=(()=>{class t{constructor(t,e,i,n){this._interactionService=t,this._router=e,this._formBuilder=i,this._activatedRoute=n,this.isSubmitted=!1,this.title=" Interaction Contacts",this.breadCrumbLinkItems=r.J.breadCrumbLinkItems,this.backLink="/interaction-management/contacts",this.addForm=this._formBuilder.group({name:["interactionperson1",o.kI.required],middleName:[null,o.kI.required],surname:[null,o.kI.required],email:[null,o.kI.required],contactNumber:[null,o.kI.required],interactionPlace:[null,o.kI.required],interactionPurpose:[null,o.kI.required],interactionType:[null,o.kI.required],interactionDate:[null,o.kI.required],notes:[null,o.kI.required]}),this.selectedId=this._activatedRoute.snapshot.params.id,this.loadData(this.selectedId)}ngOnInit(){}get fCtrls(){return this.addForm.controls}loadData(t){this.isSubmitted=!0,this._interactionService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.addForm.patchValue(Object.assign({},t.data))),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}onUpdate(){console.log(this.addForm.value),this.isSubmitted=!0,this._interactionService.sUpdate(this.selectedId,this.addForm.value).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl("/contacts")},t=>{this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c),a.Y36(d.F0),a.Y36(o.qu),a.Y36(d.gz))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-view-interactions"]],decls:66,vars:17,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","name","label","First Name","isReadonly","true'",3,"fGroup"],["fCtrlName","middleName","label","Middle Name","isReadonly","true'",3,"fGroup"],["fCtrlName","surname","label","Last Name","isReadonly","true'",3,"fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","email","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","contactNumber","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionPlace","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionPurpose","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionType","readonly","",1,"form-control"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionDate","readonly","",1,"form-control"],[1,"col-md-12"],["id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","notes","rows","5","readonly","",1,"form-control"],[1,"card-footer","text-right"]],template:function(t,e){1&t&&(a.YNc(0,b,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"form",11),a.TgZ(15,"div",12),a.TgZ(16,"div",13),a._UZ(17,"app-v-input-full",14),a.qZA(),a.TgZ(18,"div",13),a._UZ(19,"app-v-input-full",15),a.qZA(),a.TgZ(20,"div",13),a._UZ(21,"app-v-input-full",16),a.qZA(),a.TgZ(22,"div",13),a.TgZ(23,"div",17),a.TgZ(24,"label",18),a._uU(25,"Email"),a.qZA(),a._UZ(26,"input",19),a.YNc(27,q,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(28,"div",13),a.TgZ(29,"div",17),a.TgZ(30,"label",18),a._uU(31,"contactNumber"),a.qZA(),a._UZ(32,"input",20),a.YNc(33,T,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(34,"div",13),a.TgZ(35,"div",17),a.TgZ(36,"label",18),a._uU(37,"interactionPlace"),a.qZA(),a._UZ(38,"input",21),a.YNc(39,A,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(40,"div",13),a.TgZ(41,"div",17),a.TgZ(42,"label",18),a._uU(43,"interactionPurpose"),a.qZA(),a._UZ(44,"input",22),a.YNc(45,v,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(46,"div",13),a.TgZ(47,"div",17),a.TgZ(48,"label",18),a._uU(49,"interactionType"),a.qZA(),a._UZ(50,"input",23),a.YNc(51,_,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(52,"div",13),a.TgZ(53,"div",17),a.TgZ(54,"label",18),a._uU(55,"interactionDate"),a.qZA(),a._UZ(56,"input",24),a.YNc(57,C,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(58,"div",25),a.TgZ(59,"div",17),a.TgZ(60,"label",18),a._uU(61,"Notes"),a.qZA(),a._UZ(62,"textarea",26),a.YNc(63,x,2,0,"p",0),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(64,"div",27),a.qZA(),a.qZA(),a.qZA(),a._UZ(65,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(5),a.hij("View ",e.title,""),a.xp6(2),a.Q6J("link",e.backLink),a.xp6(2),a.Q6J("formGroup",e.addForm),a.xp6(3),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(6),a.Q6J("ngIf",e.fCtrls.email.dirty&&e.fCtrls.email.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.contactNumber.dirty&&e.fCtrls.contactNumber.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionPlace.dirty&&e.fCtrls.interactionPlace.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionPurpose.dirty&&e.fCtrls.interactionPurpose.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionType.dirty&&e.fCtrls.interactionType.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionDate.dirty&&e.fCtrls.interactionDate.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.notes.dirty&&e.fCtrls.notes.invalid))},directives:[n.O5,u.G,p.k,m.e,Z.K,o._Y,o.JL,o.sg,g.a,o.Fj,o.JJ,o.u,h.c,f.O],styles:[""]}),t})(),S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-edit-interaction-msg-formats"]],decls:2,vars:0,template:function(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1,"edit-interaction-msg-formats works!"),a.qZA())},styles:[""]}),t})(),I=(()=>{class t{constructor(t){this._httpClient=t,this.url=l.A.INTERACTION_MSG_FORMATS}sIndex(){return this._httpClient.get(this.url)}sStore(t){let e=Object.assign({},t);return this._httpClient.post(this.url,e)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(s.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function N(t,e){1&t&&a._UZ(0,"v-loader")}function k(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Message is Required "),a.qZA())}let y=(()=>{class t{constructor(t,e,i){this._interactionMsgFormatService=t,this._router=e,this._formBuilder=i,this.isSubmitted=!1,this.title=" Interaction Format Messages",this.breadCrumbLinkItems=r.J.breadCrumbLinkItems,this.indexRedirect="/interaction-management/msg-formats",this.formJson={controls:[{name:"name",label:"Name:",value:"",type:"text",validators:{required:!0}},{name:"message",label:"Message:",value:"",type:"textarea",validators:{required:!0}}]},this.addForm=this._formBuilder.group({name:[null,o.kI.required],message:[null,o.kI.required]}),this.addFormFromJson=this._formBuilder.group({})}ngOnInit(){}createForm(){let t=this.formJson.controls;for(let e of t);}get fCtrls(){return this.addForm.controls}onSubmit(){console.log(this.addForm.value),this.isSubmitted=!0,this._interactionMsgFormatService.sStore(this.addForm.value).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl(this.indexRedirect)},t=>{this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(I),a.Y36(d.F0),a.Y36(o.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-add-interaction-msg-formats"]],decls:28,vars:11,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-12"],["fCtrlName","name",3,"label","fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","message",1,"form-control"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(a.YNc(0,N,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"form",11),a.TgZ(15,"div",12),a.TgZ(16,"div",13),a._UZ(17,"app-v-input-full",14),a.qZA(),a.TgZ(18,"div",13),a.TgZ(19,"div",15),a.TgZ(20,"label",16),a._uU(21,"Message"),a.qZA(),a._UZ(22,"input",17),a.YNc(23,k,2,0,"p",0),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",18),a.TgZ(25,"button",19),a.NdJ("click",function(){return e.onSubmit()}),a._uU(26,"Submit"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(27,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(5),a.hij("Add ",e.title,""),a.xp6(2),a.Q6J("link",e.indexRedirect),a.xp6(2),a.Q6J("formGroup",e.addForm),a.xp6(3),a.Q6J("label","Name")("fGroup",e.addForm),a.xp6(6),a.Q6J("ngIf",e.fCtrls.message.dirty&&e.fCtrls.message.invalid),a.xp6(2),a.Q6J("disabled",!e.addForm.valid))},directives:[n.O5,u.G,p.k,m.e,Z.K,o._Y,o.JL,o.sg,g.a,o.Fj,o.JJ,o.u,h.c,f.O],styles:[""]}),t})();var J=i(99713),F=i(71397),w=i(86659),O=i(83559),L=i(85907);function Q(t,e){1&t&&a._UZ(0,"v-loader")}function M(t,e){if(1&t&&(a.TgZ(0,"th",16),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}const Y=function(t,e){return[t,e,"edit"]};function E(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._UZ(8,"v-btn",17),a.TgZ(9,"v-btn",18),a.NdJ("actionEvent",function(e){return a.CHM(t),a.oxw().delete(e)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=e.index,n=a.oxw();a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(t.name),a.xp6(2),a.Oqu(t.message),a.xp6(2),a.Q6J("link",a.WLB(5,Y,n.editLink,t._id)),a.xp6(1),a.Q6J("actionValue",t._id)}}let R=(()=>{class t{constructor(t){this._interactionMsgFormatService=t,this.isSubmitted=!1,this.title="Interaction MessageFormats",this.breadCrumbLinkItems=r.J.breadCrumbLinkItems,this.thCols=["Id","Name","Message","Actions"],this.addLink="/interaction-management/msg-formats/create",this.editLink="/interaction-management/msg-formats",this.list=[],this.dtOptions={},this.dtTrigger=new O.xQ,this.showAddForm=!1}ngOnInit(){this.index(),this.dtOptions=F.Z.options}index(){this.isSubmitted=!0,this.list=[],this._interactionMsgFormatService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.list=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._interactionMsgFormatService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),w.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}onShowAddForm(){this.showAddForm=!this.showAddForm}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(I))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-list-interaction-msg-formats"]],decls:22,vars:9,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","add",3,"link"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","compact","table-sm"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["actionType","edit",3,"link"],["actionType","deleteclick",3,"actionValue","actionEvent"]],template:function(t,e){1&t&&(a.YNc(0,Q,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"div",11),a.TgZ(15,"table",12),a.TgZ(16,"thead",13),a.TgZ(17,"tr"),a.YNc(18,M,2,1,"th",14),a.qZA(),a.qZA(),a.TgZ(19,"tbody"),a.YNc(20,E,10,8,"tr",15),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(21,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(1),a.Q6J("@slideFromRight",void 0),a.xp6(4),a.hij(" List ",e.title,""),a.xp6(2),a.Q6J("link",e.addLink),a.xp6(6),a.Q6J("ngForOf",e.thCols),a.xp6(2),a.Q6J("ngForOf",e.list))},directives:[n.O5,u.G,p.k,m.e,Z.K,n.sg,h.c,f.O],styles:[""],data:{animation:[(0,J.X$)("slideFromRight",[(0,J.eR)("void=>*",[(0,J.oB)({opacity:0,transform:"translateX(100%)"}),(0,J.jt)(".8s",(0,J.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})(),B=(()=>{class t{}return t.breadCrumbLinkItems=[{label:"Panel",link:"/interaction-management"}],t.LIST_OF_CONTACTS="/interaction-management/contacts",t})();var P=i(75470);let D=(()=>{class t{constructor(t){this._httpClient=t,this.url=l.A.INTERACTION_SCHEDULE_NOTIFCATIONS}sIndex(){return this._httpClient.get(this.url)}sStore(t,e=!1){let i=Object.assign(Object.assign({},t),{isMultiple:e});return this._httpClient.post(this.url,i)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sSendNotifications(t){return this._httpClient.get(this.url+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(s.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var G=i(54733);function j(t,e){1&t&&a._UZ(0,"v-loader")}function H(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10,"-"),a.qZA(),a.TgZ(11,"td"),a.TgZ(12,"v-btn",16),a.NdJ("actionEvent",function(e){return a.CHM(t),a.oxw(2).delete(e)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=e.index;a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(t.scheduleDate),a.xp6(2),a.Oqu(t.interactionMsgFormatId.name),a.xp6(2),a.Oqu(t.contact.name),a.xp6(4),a.Q6J("actionValue",t._id)}}function V(t,e){if(1&t&&(a.TgZ(0,"tbody"),a.YNc(1,H,13,5,"tr",15),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.list)}}const X=function(t){return[t]};let $=(()=>{class t{constructor(t,e){this.modalService=t,this._interactionScheduleNotificationService=e,this.isSubmitted=!1,this.title="Interaction Schedule Messages",this.breadCrumbLinkItems=B.breadCrumbLinkItems,this.link="/interaction-management/schedule-notifications/send",this.list=[],this.dtOptions={},this.dtTrigger=new O.xQ}ngOnInit(){this.index(),this.dtOptions=F.Z.options}index(){this.isSubmitted=!0,this.list=[],this._interactionScheduleNotificationService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.list=t.data,this.dtTrigger.next()),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._interactionScheduleNotificationService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),w.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(P.tT),a.Y36(D))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-list-interaction-schedule-notifications"]],decls:33,vars:12,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"routerLink"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col"],[4,"ngFor","ngForOf"],["actionType","deleteclick",3,"actionValue","actionEvent"]],template:function(t,e){1&t&&(a.YNc(0,j,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a.TgZ(12,"button",9),a._uU(13,"Schedule New Messages"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",10),a.TgZ(15,"div",11),a.TgZ(16,"table",12),a.TgZ(17,"thead",13),a.TgZ(18,"tr"),a.TgZ(19,"th",14),a._uU(20,"ID"),a.qZA(),a.TgZ(21,"th",14),a._uU(22,"Schedule Date"),a.qZA(),a.TgZ(23,"th",14),a._uU(24,"Schedule Message"),a.qZA(),a.TgZ(25,"th",14),a._uU(26,"To Contact"),a.qZA(),a.TgZ(27,"th",14),a._uU(28,"Sent Status"),a.qZA(),a.TgZ(29,"th",14),a._uU(30,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.YNc(31,V,2,1,"tbody",0),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(32,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(1),a.Q6J("@slideFromRight",void 0),a.xp6(4),a.hij(" List ",e.title,""),a.xp6(2),a.Q6J("routerLink",a.VKq(10,X,e.link)),a.xp6(4),a.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),a.xp6(15),a.Q6J("ngIf",e.list&&e.list.length))},directives:[n.O5,u.G,p.k,m.e,d.rH,G.G,h.c,f.O,n.sg,Z.K],styles:[""],data:{animation:[(0,J.X$)("slideFromRight",[(0,J.eR)("void=>*",[(0,J.oB)({opacity:0,transform:"translateX(100%)"}),(0,J.jt)(".8s",(0,J.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})();var W=i(905),K=i(68281);function z(t,e){1&t&&a._UZ(0,"v-loader")}function tt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Select Contact "),a.qZA())}function et(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Email is Required "),a.qZA())}function it(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Contact Number is Required "),a.qZA())}function nt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Interaction Type is Required "),a.qZA())}function ot(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Interaction Purpose is Required "),a.qZA())}function rt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Interaction Date is Required "),a.qZA())}function at(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Next interaction date is Required "),a.qZA())}function st(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Notes is Required "),a.qZA())}let lt=(()=>{class t{constructor(t,e,i,n,r){this._interactionService=t,this._router=e,this._formBuilder=i,this._activatedRoute=n,this._contactsService=r,this.isSubmitted=!1,this.title=" Interaction Contacts",this.breadCrumbLinkItems=B.breadCrumbLinkItems,this.backLink="/interaction-management/contacts",this.addForm=this._formBuilder.group({contactId:[null,o.kI.required],name:[null],middleName:[null],surname:[null],email:[null],contactNumber:[null],interactionPurpose:[null,o.kI.required],interactionType:[null,o.kI.required],interactionDate:[null,o.kI.required],nextInteractionDate:[null,o.kI.required],notes:[null,o.kI.required]}),this.contactList=[],this.selectedId=this._activatedRoute.snapshot.params.id,this.loadData(this.selectedId)}ngOnInit(){this.getContactList()}getContactList(){this._contactsService.sIndex().subscribe(t=>{this.contactList=t.data.map(t=>({id:t._id,text:t.name+" - "+t.phoneNumber+" - "+t.city}))})}onTagChanged(t){console.log(this.contact),this.updateContactId(t),this.getSelectedContactData(t)}get fCtrls(){return this.addForm.controls}loadData(t){this.isSubmitted=!0,this._interactionService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.addForm.patchValue(Object.assign({},t.data))),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}onUpdate(){console.log(this.addForm.value),this.isSubmitted=!0,this._interactionService.sUpdate(this.selectedId,this.addForm.value).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl(B.LIST_OF_CONTACTS)},t=>{this.isSubmitted=!1})}updateContactId(t){this.fCtrls.contactId.setValue(t)}getSelectedContactData(t){console.log("id:",t),this.isSubmitted=!0,this._contactsService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.addForm.patchValue(Object.assign({},t.data)),this.selectedContactData=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c),a.Y36(d.F0),a.Y36(o.qu),a.Y36(d.gz),a.Y36(W.P))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-edit-interactions"]],decls:100,vars:25,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","exampleInputPassword1"],[1,"col-md-12","pr-0","pl-0"],["width","100%","formControlName","contactId",3,"ngModel","data","value","placeholder","ngModelChange","valueChanged"],["fCtrlName","name","label","First Name","isReadonly","true",3,"fGroup"],["fCtrlName","middleName","label","Middle Name","isReadonly","true",3,"fGroup"],["fCtrlName","surname","label","Last Name","isReadonly","true",3,"fGroup"],["for","exampleInputEmail1"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","email","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","contactNumber","readonly","",1,"form-control"],["formControlName","interactionType",1,"form-control",3,"ngModel"],["value","null"],["value","Phone"],["value","Physical"],["value","Mail"],["value","WhatsApp"],["value","SMS"],["formControlName","interactionPurpose",1,"form-control",3,"ngModel"],["value","Courtesy"],["value","Wishes"],["value","Follow up"],["value","Information"],["value","Other type"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionDate",1,"form-control"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","nextInteractionDate",1,"form-control"],[1,"col-md-12"],["name","","id","","rows","3","formControlName","notes",1,"form-control"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(a.YNc(0,z,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"form",11),a.TgZ(15,"div",12),a.TgZ(16,"div",13),a.TgZ(17,"div",14),a.TgZ(18,"label",15),a._uU(19,"Select Contact"),a.qZA(),a.TgZ(20,"div",16),a.TgZ(21,"ng-select2",17),a.NdJ("ngModelChange",function(t){return e.contact=t})("valueChanged",function(t){return e.onTagChanged(t)}),a.qZA(),a.qZA(),a.YNc(22,tt,2,0,"p",0),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",12),a.TgZ(24,"div",13),a._UZ(25,"app-v-input-full",18),a.qZA(),a.TgZ(26,"div",13),a._UZ(27,"app-v-input-full",19),a.qZA(),a.TgZ(28,"div",13),a._UZ(29,"app-v-input-full",20),a.qZA(),a.TgZ(30,"div",13),a.TgZ(31,"div",14),a.TgZ(32,"label",21),a._uU(33,"Email"),a.qZA(),a._UZ(34,"input",22),a.YNc(35,et,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(36,"div",13),a.TgZ(37,"div",14),a.TgZ(38,"label",21),a._uU(39,"Contact Number"),a.qZA(),a._UZ(40,"input",23),a.YNc(41,it,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(42,"div",13),a.TgZ(43,"div",14),a.TgZ(44,"label",21),a._uU(45,"Interaction Type"),a.qZA(),a.TgZ(46,"select",24),a.TgZ(47,"option",25),a._uU(48,"Select Group"),a.qZA(),a.TgZ(49,"option",26),a._uU(50,"Phone"),a.qZA(),a.TgZ(51,"option",27),a._uU(52,"Physical"),a.qZA(),a.TgZ(53,"option",28),a._uU(54,"Mail"),a.qZA(),a.TgZ(55,"option",29),a._uU(56,"WhatsApp"),a.qZA(),a.TgZ(57,"option",30),a._uU(58,"SMS"),a.qZA(),a.qZA(),a.YNc(59,nt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(60,"div",13),a.TgZ(61,"div",14),a.TgZ(62,"label",21),a._uU(63,"Interaction Purpose"),a.qZA(),a.TgZ(64,"select",31),a.TgZ(65,"option",25),a._uU(66,"Select Group"),a.qZA(),a.TgZ(67,"option",32),a._uU(68,"Courtesy"),a.qZA(),a.TgZ(69,"option",33),a._uU(70,"Wishes"),a.qZA(),a.TgZ(71,"option",34),a._uU(72,"Follow up"),a.qZA(),a.TgZ(73,"option",35),a._uU(74,"Information"),a.qZA(),a.TgZ(75,"option",36),a._uU(76,"Other type"),a.qZA(),a.qZA(),a.YNc(77,ot,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(78,"div",13),a.TgZ(79,"div",14),a.TgZ(80,"label",21),a._uU(81,"Interaction Date"),a.qZA(),a._UZ(82,"input",37),a.YNc(83,rt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(84,"div",13),a.TgZ(85,"div",14),a.TgZ(86,"label",21),a._uU(87,"Next Interaction Date"),a.qZA(),a._UZ(88,"input",38),a.YNc(89,at,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(90,"div",39),a.TgZ(91,"div",14),a.TgZ(92,"label",21),a._uU(93,"Notes"),a.qZA(),a._UZ(94,"textarea",40),a.YNc(95,st,2,0,"p",0),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(96,"div",41),a.TgZ(97,"button",42),a.NdJ("click",function(){return e.onUpdate()}),a._uU(98,"Update"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(99,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(5),a.hij("Edit ",e.title,""),a.xp6(2),a.Q6J("link",e.backLink),a.xp6(2),a.Q6J("formGroup",e.addForm),a.xp6(7),a.Q6J("ngModel",e.contact)("data",e.contactList)("value",e.selectedId)("placeholder","Select Contact"),a.xp6(1),a.Q6J("ngIf",e.fCtrls.contactId.dirty&&e.fCtrls.contactId.invalid),a.xp6(3),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(6),a.Q6J("ngIf",e.fCtrls.email.dirty&&e.fCtrls.email.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.contactNumber.dirty&&e.fCtrls.contactNumber.invalid),a.xp6(5),a.Q6J("ngModel",null),a.xp6(13),a.Q6J("ngIf",e.fCtrls.interactionType.dirty&&e.fCtrls.interactionType.invalid),a.xp6(5),a.Q6J("ngModel",null),a.xp6(13),a.Q6J("ngIf",e.fCtrls.interactionPurpose.dirty&&e.fCtrls.interactionPurpose.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionDate.dirty&&e.fCtrls.interactionDate.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionDate.dirty&&e.fCtrls.interactionDate.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.notes.dirty&&e.fCtrls.notes.invalid),a.xp6(2),a.Q6J("disabled",!e.addForm.valid))},directives:[n.O5,u.G,p.k,m.e,Z.K,o._Y,o.JL,o.sg,K.c,o.JJ,o.u,g.a,o.Fj,o.EJ,o.YN,o.Kr,h.c,f.O],styles:[""]}),t})();function ct(t,e){1&t&&a._UZ(0,"v-loader")}function dt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," email is Required "),a.qZA())}function ut(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," contactNumber is Required "),a.qZA())}function pt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Interaction Type is Required "),a.qZA())}function mt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionPurpose is Required "),a.qZA())}function Zt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," interactionDate is Required "),a.qZA())}function gt(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Next interaction date is Required "),a.qZA())}function ht(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1," Notes is Required "),a.qZA())}let ft=(()=>{class t{constructor(t,e,i,n){this._interactionService=t,this._router=e,this._formBuilder=i,this._contactsService=n,this.isSubmitted=!1,this.title="Interaction Contacts",this.breadCrumbLinkItems=B.breadCrumbLinkItems,this.backLink="/interaction-management/contacts",this.addForm=this._formBuilder.group({contactId:[null,o.kI.required],name:[null],middleName:[null],surname:[null],email:[null],contactNumber:[null,o.kI.required],interactionPurpose:[null,o.kI.required],interactionType:[null,o.kI.required],interactionDate:[null,o.kI.required],nextInteractionDate:[null,o.kI.required],notes:[null,o.kI.required]}),this.contactList=[]}ngOnInit(){this.getContactList()}getContactList(){this._contactsService.sIndex().subscribe(t=>{this.contactList=t.data.map(t=>({id:t._id,text:t.name+" - "+t.phoneNumber+" - "+t.city}))})}onTagChanged(t){console.log(this.contact),this.updateContactId(t),this.getSelectedContactData(t)}updateContactId(t){this.fCtrls.contactId.setValue(t)}getSelectedContactData(t){console.log("id:",t),this.isSubmitted=!0,this._contactsService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.addForm.patchValue(Object.assign({},t.data)),this.selectedContactData=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}get fCtrls(){return this.addForm.controls}finalizedFromFieldValues(t){return delete t.name,delete t.surname,delete t.email,delete t.contactNumber,t}onSubmit(){console.log(this.addForm.value);let t=this.finalizedFromFieldValues(this.addForm.value);this.isSubmitted=!0,this._interactionService.sStore(t).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl(this.backLink)},t=>{this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c),a.Y36(d.F0),a.Y36(o.qu),a.Y36(W.P))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-add-interactions"]],decls:99,vars:23,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","exampleInputPassword1"],[1,"col-md-12","pr-0","pl-0"],["width","100%","formControlName","contactId",3,"ngModel","data","placeholder","ngModelChange","valueChanged"],["fCtrlName","name","label","First Name","isReadonly","true",3,"fGroup"],["fCtrlName","middleName","label","Middle Name","isReadonly","true",3,"fGroup"],["fCtrlName","surname","label","Last Name","isReadonly","true",3,"fGroup"],["for","exampleInputEmail1"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","email","readonly","",1,"form-control"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","contactNumber","readonly","",1,"form-control"],["formControlName","interactionType",1,"form-control",3,"ngModel"],["value","null"],["value","Phone"],["value","Physical"],["value","Mail"],["value","WhatsApp"],["value","SMS"],["formControlName","interactionPurpose",1,"form-control",3,"ngModel"],["value","Courtesy"],["value","Wishes"],["value","Follow up"],["value","Information"],["value","Other type"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","interactionDate",1,"form-control"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","formControlName","nextInteractionDate",1,"form-control"],[1,"col-md-12"],["name","","id","","rows","3","formControlName","notes",1,"form-control"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(a.YNc(0,ct,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.qZA(),a.qZA(),a.TgZ(13,"div",10),a.TgZ(14,"form",11),a.TgZ(15,"div",12),a.TgZ(16,"div",13),a.TgZ(17,"div",14),a.TgZ(18,"label",15),a._uU(19,"Concerned Contact"),a.qZA(),a.TgZ(20,"div",16),a.TgZ(21,"ng-select2",17),a.NdJ("ngModelChange",function(t){return e.contact=t})("valueChanged",function(t){return e.onTagChanged(t)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"div",12),a.TgZ(23,"div",13),a._UZ(24,"app-v-input-full",18),a.qZA(),a.TgZ(25,"div",13),a._UZ(26,"app-v-input-full",19),a.qZA(),a.TgZ(27,"div",13),a._UZ(28,"app-v-input-full",20),a.qZA(),a.TgZ(29,"div",13),a.TgZ(30,"div",14),a.TgZ(31,"label",21),a._uU(32,"Email"),a.qZA(),a._UZ(33,"input",22),a.YNc(34,dt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(35,"div",13),a.TgZ(36,"div",14),a.TgZ(37,"label",21),a._uU(38,"Contact Number"),a.qZA(),a._UZ(39,"input",23),a.YNc(40,ut,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(41,"div",13),a.TgZ(42,"div",14),a.TgZ(43,"label",21),a._uU(44,"Interaction Type"),a.qZA(),a.TgZ(45,"select",24),a.TgZ(46,"option",25),a._uU(47,"Select Group"),a.qZA(),a.TgZ(48,"option",26),a._uU(49,"Phone"),a.qZA(),a.TgZ(50,"option",27),a._uU(51,"Physical"),a.qZA(),a.TgZ(52,"option",28),a._uU(53,"Mail"),a.qZA(),a.TgZ(54,"option",29),a._uU(55,"WhatsApp"),a.qZA(),a.TgZ(56,"option",30),a._uU(57,"SMS"),a.qZA(),a.qZA(),a.YNc(58,pt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(59,"div",13),a.TgZ(60,"div",14),a.TgZ(61,"label",21),a._uU(62,"Interaction Purpose"),a.qZA(),a.TgZ(63,"select",31),a.TgZ(64,"option",25),a._uU(65,"Select Group"),a.qZA(),a.TgZ(66,"option",32),a._uU(67,"Courtesy"),a.qZA(),a.TgZ(68,"option",33),a._uU(69,"Wishes"),a.qZA(),a.TgZ(70,"option",34),a._uU(71,"Follow up"),a.qZA(),a.TgZ(72,"option",35),a._uU(73,"Information"),a.qZA(),a.TgZ(74,"option",36),a._uU(75,"Other type"),a.qZA(),a.qZA(),a.YNc(76,mt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(77,"div",13),a.TgZ(78,"div",14),a.TgZ(79,"label",21),a._uU(80,"Interaction Date"),a.qZA(),a._UZ(81,"input",37),a.YNc(82,Zt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(83,"div",13),a.TgZ(84,"div",14),a.TgZ(85,"label",21),a._uU(86,"Next Interaction Date"),a.qZA(),a._UZ(87,"input",38),a.YNc(88,gt,2,0,"p",0),a.qZA(),a.qZA(),a.TgZ(89,"div",39),a.TgZ(90,"div",14),a.TgZ(91,"label",21),a._uU(92,"Notes"),a.qZA(),a._UZ(93,"textarea",40),a.YNc(94,ht,2,0,"p",0),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(95,"div",41),a.TgZ(96,"button",42),a.NdJ("click",function(){return e.onSubmit()}),a._uU(97," Submit "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(98,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(5),a.hij("Add ",e.title,""),a.xp6(2),a.Q6J("link",e.backLink),a.xp6(2),a.Q6J("formGroup",e.addForm),a.xp6(7),a.Q6J("ngModel",e.contact)("data",e.contactList)("placeholder","Concerned Contact"),a.xp6(3),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(2),a.Q6J("fGroup",e.addForm),a.xp6(6),a.Q6J("ngIf",e.fCtrls.email.dirty&&e.fCtrls.email.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.contactNumber.dirty&&e.fCtrls.contactNumber.invalid),a.xp6(5),a.Q6J("ngModel",null),a.xp6(13),a.Q6J("ngIf",e.fCtrls.interactionType.dirty&&e.fCtrls.interactionType.invalid),a.xp6(5),a.Q6J("ngModel",null),a.xp6(13),a.Q6J("ngIf",e.fCtrls.interactionPurpose.dirty&&e.fCtrls.interactionPurpose.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionDate.dirty&&e.fCtrls.interactionDate.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.interactionDate.dirty&&e.fCtrls.interactionDate.invalid),a.xp6(6),a.Q6J("ngIf",e.fCtrls.notes.dirty&&e.fCtrls.notes.invalid),a.xp6(2),a.Q6J("disabled",!e.addForm.valid))},directives:[n.O5,u.G,p.k,m.e,Z.K,o._Y,o.JL,o.sg,K.c,o.JJ,o.u,g.a,o.Fj,o.EJ,o.YN,o.Kr,h.c,f.O],styles:[""]}),t})();var bt=i(70118),qt=i(72644);function Tt(t,e){1&t&&a._UZ(0,"v-loader")}function At(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",18),a.NdJ("click",function(){return a.CHM(t),a.oxw().exportToExcel()}),a._uU(1),a.qZA()}if(2&t){const t=a.oxw();a.xp6(1),a.Oqu(t.exportBtnLabel)}}function vt(t,e){if(1&t&&(a.TgZ(0,"th",19),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}const _t=function(t,e){return[t,e]},Ct=function(t,e){return[t,e,"edit"]};function xt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a._UZ(12,"v-btn",20),a._UZ(13,"v-btn",21),a.TgZ(14,"v-btn",22),a.NdJ("actionEvent",function(e){return a.CHM(t),a.oxw().delete(e)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=e.index,n=a.oxw();a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(t.name),a.xp6(2),a.Oqu(t.middleName),a.xp6(2),a.Oqu(t.surname),a.xp6(2),a.Oqu(t.contactNumber),a.xp6(2),a.Q6J("link",a.WLB(8,_t,n.editViewLink,t._id)),a.xp6(1),a.Q6J("link",a.WLB(11,Ct,n.editViewLink,t._id)),a.xp6(1),a.Q6J("actionValue",t._id)}}function Ut(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a.TgZ(8,"button",29),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).sendNotification(e._id)}),a._uU(9,"Send"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=e.index;a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(t.name),a.xp6(2),a.Oqu(t.message)}}function St(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",23),a.TgZ(1,"h4",24),a._uU(2,"Select Annoucements"),a.qZA(),a.TgZ(3,"button",25),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return null==e.modalRef?null:e.modalRef.hide()}),a.TgZ(4,"span",26),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",27),a.TgZ(7,"table",28),a.TgZ(8,"thead",14),a.TgZ(9,"tr"),a.TgZ(10,"th",19),a._uU(11,"ID"),a.qZA(),a.TgZ(12,"th",19),a._uU(13,"NAME"),a.qZA(),a.TgZ(14,"th",19),a._uU(15,"MESSAGE"),a.qZA(),a.TgZ(16,"th",19),a._uU(17,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"tbody"),a.YNc(19,Ut,10,3,"tr",16),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(19),a.Q6J("ngForOf",t.anouncementsList)}}let It=(()=>{class t{constructor(t,e,i){this._interactionService=t,this.modalService=e,this._interactionMsgFormatService=i,this.isSubmitted=!1,this.title="Interaction Contacts",this.breadCrumbLinkItems=B.breadCrumbLinkItems,this.thCols=["Id","First Name","Middle Name","Last Name","Contact Number","Actions"],this.addLink="/interaction-management/contacts/create",this.editViewLink="/interaction-management/contacts",this.bulkImportsLink="/interaction-management/contacts/bulk-import-contacts",this.list=[],this.dtOptions={},this.dtTrigger=new O.xQ,this.exportBtnLabel=bt.h.exportBtnLabel,this.anouncementsList=[]}ngOnInit(){this.index(),this.dtOptions=F.Z.optionsWithoutDownload}index(){this.isSubmitted=!0,this.list=[],this._interactionService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.isSubmitted=!1,this.list=t.data,this.dtTrigger.next()),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._interactionService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),w.Z.showSweetAlert("Deleted Successfully",!1),setTimeout(()=>{location.reload()},300)},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}openModal(t){this.modalRef=this.modalService.show(t)}showPopUpToSelectAnnouncemnets(t,e){this.selectedContactId=e,this.openModal(t),this.loadAnnouncements()}loadAnnouncements(){this.isSubmitted=!0,this.anouncementsList=[],this._interactionMsgFormatService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.anouncementsList=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}sendNotification(t){return L.success("Notification sent successfully"),this.modalRef.hide(),!1}exportToExcel(){let t=[["Name","Surname","Email","Contact Number","Interaction Purpose","Interaction Type","Interaction Date","Notes"],...this.list.map(t=>[t.name,t.surname,t.email,t.contactNumber,t.interactionPurpose,t.interactionType,t.interactionDate,t.notes])];(0,qt.C)(t,"Interaction Contacts list")}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c),a.Y36(P.tT),a.Y36(I))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-list-interactions"]],viewQuery:function(t,e){if(1&t&&a.Gf(G.G,5),2&t){let t;a.iGM(t=a.CRH())&&(e.dtElement=t.first)}},decls:25,vars:12,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","add",3,"link"],["type","button","class","btn btn-success1 btn-xs rounded-pill px-3 py-1 fs-5 fw-bold",3,"click",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["template",""],["type","button",1,"btn","btn-success1","btn-xs","rounded-pill","px-3","py-1","fs-5","fw-bold",3,"click"],["scope","col"],["actionType","view",3,"link"],["actionType","edit",3,"link"],["actionType","deleteclick",3,"actionValue","actionEvent"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"table","table-striped","table-bordered","compact","table-sm"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"click"]],template:function(t,e){1&t&&(a.YNc(0,Tt,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a._UZ(12,"v-btn",9),a.YNc(13,At,2,1,"button",10),a.qZA(),a.qZA(),a.TgZ(14,"div",11),a.TgZ(15,"div",12),a.TgZ(16,"table",13),a.TgZ(17,"thead",14),a.TgZ(18,"tr"),a.YNc(19,vt,2,1,"th",15),a.qZA(),a.qZA(),a.TgZ(20,"tbody"),a.YNc(21,xt,15,14,"tr",16),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(22,"app-footer"),a.qZA(),a.YNc(23,St,20,1,"ng-template",null,17,a.W1O)),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(1),a.Q6J("@slideFromRight",void 0),a.xp6(4),a.hij(" List ",e.title,""),a.xp6(2),a.Q6J("link",e.addLink),a.xp6(1),a.Q6J("ngIf",e.list&&e.list.length),a.xp6(3),a.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),a.xp6(3),a.Q6J("ngForOf",e.thCols),a.xp6(2),a.Q6J("ngForOf",e.list))},directives:[n.O5,u.G,p.k,m.e,Z.K,G.G,n.sg,h.c,f.O],styles:[""],data:{animation:[(0,J.X$)("slideFromRight",[(0,J.eR)("void=>*",[(0,J.oB)({opacity:0,transform:"translateX(100%)"}),(0,J.jt)(".8s",(0,J.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})();function Nt(t,e){1&t&&a._UZ(0,"v-loader")}const kt=function(t){return[t]};function yt(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"div",14),a.TgZ(2,"div",15),a.TgZ(3,"h3"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"div",16),a._UZ(8,"i"),a.qZA(),a.TgZ(9,"a",17),a._uU(10,"More info "),a._UZ(11,"i",18),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Udp("background-color",t.bgColorClass),a.xp6(3),a.Oqu(t.count),a.xp6(2),a.Oqu(t.title),a.xp6(2),a.Tol(t.iconName),a.xp6(1),a.Q6J("routerLink",a.VKq(8,kt,t.routeLink))}}function Jt(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"div",20),a.TgZ(2,"div",15),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div",16),a._UZ(6,"i"),a.qZA(),a.TgZ(7,"a",17),a._uU(8,"More info "),a._UZ(9,"i",18),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngClass",t.bgColorClass),a.xp6(3),a.Oqu(t.title),a.xp6(2),a.Gre("ion ",t.iconName,""),a.xp6(1),a.Q6J("routerLink",a.VKq(6,kt,t.routeLink))}}function Ft(t,e){if(1&t&&(a.TgZ(0,"div",19),a.TgZ(1,"h5",7),a._uU(2,"Reports"),a.qZA(),a.TgZ(3,"div",8),a.TgZ(4,"div",9),a.YNc(5,Jt,10,8,"div",10),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(5),a.Q6J("ngForOf",t.reportsPanelBoxes)}}function wt(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"div",20),a.TgZ(2,"div",15),a.TgZ(3,"p"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div",16),a._UZ(6,"i"),a.qZA(),a.TgZ(7,"a",17),a._uU(8,"More info "),a._UZ(9,"i",18),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Q6J("ngClass",t.bgColorClass),a.xp6(3),a.Oqu(t.title),a.xp6(2),a.Gre("ion ",t.iconName,""),a.xp6(1),a.Q6J("routerLink",a.VKq(6,kt,t.routeLink))}}function Ot(t,e){if(1&t&&(a.TgZ(0,"div",21),a.TgZ(1,"h5",7),a._uU(2,"User Help"),a.qZA(),a.TgZ(3,"div",8),a.TgZ(4,"div",9),a.YNc(5,wt,10,8,"div",10),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(5),a.Q6J("ngForOf",t.helpPanelBoxes)}}let Lt=(()=>{class t{constructor(){this.isSubmitted=!1,this.title=" Interaction Management Panel",this.breadCrumbLinkItems=r.J.breadCrumbLinkItems,this.mainPanelCountBoxes=[{title:"Interactions",routeLink:"contacts",bgColorClass:bt.h.COLORS.one,iconName:" fas fa-address-book",count:""},{title:"Message Formats",routeLink:"msg-formats",bgColorClass:bt.h.COLORS.two,iconName:"fas fa-comment-alt",count:""},{title:"Schedule",routeLink:"schedule-notifications",bgColorClass:bt.h.COLORS.three,iconName:"fas fa-calendar-alt",count:""}],this.mainPanelBoxes=[{title:"Classes",routeLink:"/classes",bgColorClass:bt.h.COLORS.one,iconName:"ion-easel",count:""},{title:"Sections",routeLink:"/sections",bgColorClass:bt.h.COLORS.two,iconName:"ion-easel",count:""},{title:"Admissions",routeLink:"/admissions",bgColorClass:bt.h.COLORS.three,iconName:"ion-easel",count:""},{title:"Attendance",routeLink:"/attendance",bgColorClass:bt.h.COLORS.four,iconName:"ion-easel",count:""}],this.reportsPanelBoxes=[],this.helpPanelBoxes=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-interaction-management-dashboard"]],decls:17,vars:6,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"container-fluid"],[1,"card","mainPanel"],[1,"card-header"],[1,"card-body"],[1,"row"],["class","col-lg-3 col-6",4,"ngFor","ngForOf"],["class","card reportsPanel",4,"ngIf"],["class","card userHelpPanel",4,"ngIf"],[1,"col-lg-3","col-6"],[1,"small-box"],[1,"inner"],[1,"icon"],[1,"small-box-footer",3,"routerLink"],[1,"fas","fa-arrow-circle-right"],[1,"card","reportsPanel"],[1,"small-box",3,"ngClass"],[1,"card","userHelpPanel"]],template:function(t,e){1&t&&(a.YNc(0,Nt,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h5",7),a._uU(10,"Main "),a.qZA(),a.TgZ(11,"div",8),a.TgZ(12,"div",9),a.YNc(13,yt,12,10,"div",10),a.qZA(),a.qZA(),a.qZA(),a.YNc(14,Ft,6,1,"div",11),a.YNc(15,Ot,6,1,"div",12),a.qZA(),a.qZA(),a.qZA(),a._UZ(16,"app-footer"),a.qZA()),2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0),a.xp6(8),a.Q6J("ngForOf",e.mainPanelCountBoxes),a.xp6(1),a.Q6J("ngIf",e.reportsPanelBoxes.length),a.xp6(1),a.Q6J("ngIf",e.helpPanelBoxes.length))},directives:[n.O5,u.G,p.k,m.e,n.sg,h.c,f.O,d.yS,n.mk],styles:[""]}),t})();function Qt(t,e){1&t&&a._UZ(0,"v-loader")}function Mt(t,e){if(1&t&&(a.TgZ(0,"th",15),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t)}}function Yt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"th",15),a.TgZ(2,"input",16),a.NdJ("change",function(e){const i=a.CHM(t).index;return a.oxw().onChangeCheckbox(e,i)}),a.qZA(),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a._uU(12),a.qZA(),a.TgZ(13,"td"),a.TgZ(14,"button",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(28);return i.showPopUpToSelectAnnouncemnets(n,e._id)}),a._uU(15,"Send"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=e.index;a.xp6(2),a.Q6J("checked",t.isChecked),a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(t.surname),a.xp6(2),a.Oqu(t.name),a.xp6(2),a.Oqu(t.phoneNumber),a.xp6(2),a.Oqu(t.email)}}function Et(t,e){if(1&t&&(a.TgZ(0,"option",36),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.s9C("value",t._id),a.xp6(1),a.Oqu(t.name)}}function Rt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",37),a.TgZ(1,"input",38),a.NdJ("change",function(){const e=a.CHM(t).index;return a.oxw(2).onChangeMessageMedia(e)}),a.qZA(),a.TgZ(2,"label",39),a._uU(3),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.s9C("value",t.label),a.s9C("id",t.id),a.xp6(1),a.s9C("for",t.id),a.xp6(1),a.Oqu(t.label)}}function Bt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Schedule Notification to Contacts"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return null==e.modalRef?null:e.modalRef.hide()}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"form",26),a._UZ(8,"input",27),a.TgZ(9,"div",28),a.TgZ(10,"label",29),a._uU(11,"Select Announcement"),a.qZA(),a.TgZ(12,"select",30),a.TgZ(13,"option",31),a._uU(14,"-Select-"),a.qZA(),a.YNc(15,Et,2,2,"option",32),a.qZA(),a.qZA(),a.TgZ(16,"div",28),a.TgZ(17,"label",29),a._uU(18,"Schedule Date"),a.qZA(),a._UZ(19,"input",33),a.qZA(),a.YNc(20,Rt,4,4,"div",34),a.TgZ(21,"div"),a.TgZ(22,"button",35),a.NdJ("click",function(){return a.CHM(t),a.oxw().sendScheduleNotification()}),a._uU(23,"Schedule"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("formGroup",t.sendScheduleNotificationForm),a.xp6(8),a.Q6J("ngForOf",t.interactionMsgFormatsList),a.xp6(5),a.Q6J("ngForOf",t.checkBoxesList),a.xp6(2),a.Q6J("disabled",!t.sendScheduleNotificationForm.valid)}}const Pt=function(t){return[t]},Dt=[{path:"msg-formats",component:R},{path:"msg-formats/create",component:y},{path:"msg-formats/:id/edit",component:S},{path:"contacts/create",component:ft},{path:"contacts/:id",component:U},{path:"contacts/:id/edit",component:lt},{path:"schedule-notifications",component:$},{path:"schedule-notifications/send",component:(()=>{class t{constructor(t,e,i,n,r){this._interactionService=t,this.modalService=e,this._interactionMsgFormatService=i,this._interactionScheduleNotificationService=n,this._formBuilder=r,this.isSubmitted=!1,this.title="Send Schedule Messages for interaction",this.breadCrumbLinkItems=B.breadCrumbLinkItems,this.thCols=["Id","Surname","Name","Phone Number","Email","Schedule Messages"],this.backLink="/interaction-management/schedule-notifications/",this.list=[],this.dtOptions={},this.dtTrigger=new O.xQ,this.sendScheduleNotificationForm=this._formBuilder.group({interactionContactId:[""],interactionMsgFormatId:["",o.kI.required],scheduleDate:[null,o.kI.required],sendNotificationVia:[null,o.kI.required]}),this.checkBoxesList=bt.h.sendNotificationViaCheckboxesList,this.interactionMsgFormatsList=[],this.isCheckedAll=!1}ngOnInit(){this.index(),this.dtOptions=F.Z.options}onChangeMessageMedia(t){console.log("i:",t),this.checkBoxesList[t].isChecked=!this.checkBoxesList[t].isChecked}get fCtrls(){return this.sendScheduleNotificationForm.controls}index(){this.isSubmitted=!0,this.list=[],this._interactionService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.list=t.data,this.dtTrigger.next()),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._interactionService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),w.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}openModal(t){this.modalRef=this.modalService.show(t)}loadAnnouncements(){this.isSubmitted=!0,this.interactionMsgFormatsList=[],this._interactionMsgFormatService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.interactionMsgFormatsList=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),L.error("No data found","Error !"),this.isSubmitted=!1})}sendScheduleNotification1(){this.isSubmitted=!0;let t=Object.assign({},this.sendScheduleNotificationForm.value);this._interactionScheduleNotificationService.sStore(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,L.success("Notification sent successfully"),this.modalRef.hide()},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}sendScheduleNotification(t=!0){this.isSubmitted=!0,this.sendScheduleNotificationForm.controls.interactionContactId.value?this.sendSingleNotification():this.sendMultipleNotifications()}sendSingleNotification(){console.log(this.checkBoxesList);let t=!1,e=!1,i=!1;this.checkBoxesList.map(n=>{n.isChecked&&("email"===n.id&&(t=!0),"sms"===n.id&&(e=!0),"whatsApp"===n.id&&(i=!0))});let n=Object.assign(Object.assign({},this.sendScheduleNotificationForm.value),{isSandEmail:t,isSandSMS:e,isSandWhatsapp:i});this._interactionScheduleNotificationService.sStore(n).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,L.success("Notification sent successfully"),this.modalRef.hide()},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}sendMultipleNotifications(){console.log("sendMultipleNotifications");let t=this.list.filter(t=>1==t.isChecked);if(0==t.length)return L.error("Please select checkboxes","Error !"),!1;let e=Object.assign(Object.assign({},this.sendScheduleNotificationForm.value),{selectedInteractionContactIds:t.map(t=>t._id)});this._interactionScheduleNotificationService.sStore(e,!0).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,L.success("Notification sent successfully"),this.modalRef.hide()},t=>{console.log("err:",t),w.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}showPopUpToSelectAnnouncemnets(t,e=null){if(e)this.selectedContactId=e,this.fCtrls.interactionContactId.setValue(e),this.fCtrls.interactionContactId.updateValueAndValidity();else if(0==this.list.filter(t=>1==t.isChecked).length)return L.error("Please select checkboxes","Error !"),!1;this.openModal(t),this.loadAnnouncements()}onChangeCheckbox(t,e){console.log("e:",t);let i=this.list[e];i.isChecked=!i.isChecked,i.isChecked||(this.isCheckedAll=!1)}onToggleAllCheckBoxes(t){this.isCheckedAll=!!t.target.checked,console.log("e:=ALL==",t),this.list.forEach(this.isCheckedAll?t=>{t.isChecked=!0}:t=>{t.isChecked=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c),a.Y36(P.tT),a.Y36(I),a.Y36(D),a.Y36(o.qu))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-send-interaction-schedule-notifications"]],decls:29,vars:14,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"routerLink"],[1,"card-body"],[1,"table-responsive"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill","mb-2",3,"click"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col"],["type","checkbox",3,"checked","change"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["template",""],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"click"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"formGroup"],["type","hidden","name","interactionContactId","formControlName","interactionContactId",1,"form-control"],[1,"form-group"],["for",""],["name","","id","","formControlName","interactionMsgFormatId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","name","scheduleDate","formControlName","scheduleDate","min","2021-12-07",1,"form-control"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info","btn-sm","rounded-pill",3,"disabled","click"],[3,"value"],[1,"form-check","form-check-inline"],["formControlName","sendNotificationVia","type","checkbox",1,"form-check-input",3,"value","id","change"],[1,"form-check-label",3,"for"]],template:function(t,e){if(1&t){const t=a.EpF();a.YNc(0,Qt,1,0,"v-loader",0),a.TgZ(1,"div",1),a._UZ(2,"app-header"),a._UZ(3,"app-sidebar"),a.TgZ(4,"div",2),a._UZ(5,"app-content-header",3),a.TgZ(6,"section",4),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"h3",7),a._uU(10),a.qZA(),a.TgZ(11,"div",8),a.TgZ(12,"button",9),a._uU(13,"Back"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",10),a.TgZ(15,"div",11),a.TgZ(16,"button",12),a.NdJ("click",function(){a.CHM(t);const i=a.MAs(28);return e.showPopUpToSelectAnnouncemnets(i)}),a._uU(17,"Send To All"),a.qZA(),a.TgZ(18,"table",13),a.TgZ(19,"thead",14),a.TgZ(20,"tr"),a.TgZ(21,"th",15),a.TgZ(22,"input",16),a.NdJ("change",function(t){return e.onToggleAllCheckBoxes(t)}),a.qZA(),a.qZA(),a.YNc(23,Mt,2,1,"th",17),a.qZA(),a.qZA(),a.TgZ(24,"tbody"),a.YNc(25,Yt,16,6,"tr",18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(26,"app-footer"),a.qZA(),a.YNc(27,Bt,24,4,"ng-template",null,19,a.W1O)}2&t&&(a.Q6J("ngIf",e.isSubmitted),a.xp6(5),a.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),a.xp6(1),a.Q6J("@slideFromRight",void 0),a.xp6(4),a.hij(" List ",e.title,""),a.xp6(2),a.Q6J("routerLink",a.VKq(12,Pt,e.backLink)),a.xp6(6),a.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),a.xp6(4),a.Q6J("checked",e.isCheckedAll),a.xp6(1),a.Q6J("ngForOf",e.thCols),a.xp6(2),a.Q6J("ngForOf",e.list))},directives:[n.O5,u.G,p.k,m.e,d.rH,G.G,n.sg,h.c,f.O,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,o.YN,o.Kr,o.Wl],styles:[""],data:{animation:[(0,J.X$)("slideFromRight",[(0,J.eR)("void=>*",[(0,J.oB)({opacity:0,transform:"translateX(100%)"}),(0,J.jt)(".8s",(0,J.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})()},{path:"contacts",component:It},{path:"",component:Lt,pathMatch:"full"}];let Gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[d.Bz.forChild(Dt)],d.Bz]}),t})();var jt=i(47635);let Ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez,Gt,jt.m]]}),t})()}}]);