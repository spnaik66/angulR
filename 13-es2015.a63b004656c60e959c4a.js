(self.webpackChunkschool_ang_proj=self.webpackChunkschool_ang_proj||[]).push([[13],{94013:function(t,e,i){"use strict";i.r(e),i.d(e,{UserManagementModule:function(){return dt}});var s=i(61116),r=i(70118);let o=(()=>{class t{}return t.breadCrumbLinkItems=[{label:"Panel",link:"/user-management"}],t.listRoute="/user-management/users",t.dashboardTitle="User Management",t.listRolesRoute="/user-management/roles",t})();var n=i(87368),a=i(80570),l=i(23458),d=i(12937),c=i(32370),u=i(22041),p=i(89264);function h(t,e){1&t&&n._UZ(0,"v-loader")}const m=function(t){return[t]};function g(t,e){if(1&t&&(n.TgZ(0,"div",13),n.TgZ(1,"div",14),n.TgZ(2,"div",15),n.TgZ(3,"h3"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"div",16),n._UZ(8,"i"),n.qZA(),n.TgZ(9,"a",17),n._uU(10,"More info "),n._UZ(11,"i",18),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Udp("background-color",t.bgColorClass),n.xp6(3),n.Oqu(t.count),n.xp6(2),n.Oqu(t.title),n.xp6(2),n.Tol(t.iconName),n.xp6(1),n.Q6J("routerLink",n.VKq(8,m,t.routeLink))}}function Z(t,e){if(1&t&&(n.TgZ(0,"div",13),n.TgZ(1,"div",20),n.TgZ(2,"div",15),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"div",16),n._UZ(6,"i"),n.qZA(),n.TgZ(7,"a",17),n._uU(8,"More info "),n._UZ(9,"i",18),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Q6J("ngClass",t.bgColorClass),n.xp6(3),n.Oqu(t.title),n.xp6(2),n.Gre("ion ",t.iconName,""),n.xp6(1),n.Q6J("routerLink",n.VKq(6,m,t.routeLink))}}function f(t,e){if(1&t&&(n.TgZ(0,"div",19),n.TgZ(1,"h5",7),n._uU(2,"Reports"),n.qZA(),n.TgZ(3,"div",8),n.TgZ(4,"div",9),n.YNc(5,Z,10,8,"div",10),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(5),n.Q6J("ngForOf",t.reportsPanelBoxes)}}function b(t,e){if(1&t&&(n.TgZ(0,"div",13),n.TgZ(1,"div",20),n.TgZ(2,"div",15),n.TgZ(3,"p"),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"div",16),n._UZ(6,"i"),n.qZA(),n.TgZ(7,"a",17),n._uU(8,"More info "),n._UZ(9,"i",18),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Q6J("ngClass",t.bgColorClass),n.xp6(3),n.Oqu(t.title),n.xp6(2),n.Gre("ion ",t.iconName,""),n.xp6(1),n.Q6J("routerLink",n.VKq(6,m,t.routeLink))}}function v(t,e){if(1&t&&(n.TgZ(0,"div",21),n.TgZ(1,"h5",7),n._uU(2,"User Help"),n.qZA(),n.TgZ(3,"div",8),n.TgZ(4,"div",9),n.YNc(5,b,10,8,"div",10),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(5),n.Q6J("ngForOf",t.helpPanelBoxes)}}let A=(()=>{class t{constructor(){this.isSubmitted=!1,this.title=o.dashboardTitle,this.mainPanelCountBoxes=[{title:"Users",routeLink:o.listRoute,bgColorClass:r.h.COLORS.one,iconName:" fas fa-user-alt",count:""},{title:"Roles",routeLink:o.listRolesRoute,bgColorClass:r.h.COLORS.two,iconName:" fas fa-address-book",count:""}],this.helpPanelBoxes=[],this.reportsPanelBoxes=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-user-management-dashboard"]],decls:17,vars:5,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title"],[1,"content"],[1,"container-fluid"],[1,"card","mainPanel"],[1,"card-header"],[1,"card-body"],[1,"row"],["class","col-lg-3 col-6",4,"ngFor","ngForOf"],["class","card reportsPanel",4,"ngIf"],["class","card userHelpPanel",4,"ngIf"],[1,"col-lg-3","col-6"],[1,"small-box"],[1,"inner"],[1,"icon"],[1,"small-box-footer",3,"routerLink"],[1,"fas","fa-arrow-circle-right"],[1,"card","reportsPanel"],[1,"small-box",3,"ngClass"],[1,"card","userHelpPanel"]],template:function(t,e){1&t&&(n.YNc(0,h,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h5",7),n._uU(10,"Main "),n.qZA(),n.TgZ(11,"div",8),n.TgZ(12,"div",9),n.YNc(13,g,12,10,"div",10),n.qZA(),n.qZA(),n.qZA(),n.YNc(14,f,6,1,"div",11),n.YNc(15,v,6,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n._UZ(16,"app-footer"),n.qZA()),2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title),n.xp6(8),n.Q6J("ngForOf",e.mainPanelCountBoxes),n.xp6(1),n.Q6J("ngIf",e.reportsPanelBoxes.length),n.xp6(1),n.Q6J("ngIf",e.helpPanelBoxes.length))},directives:[s.O5,a.G,l.k,d.e,s.sg,c.c,u.O,p.yS,s.mk],styles:[""]}),t})();var T=i(99713),q=i(71397),_=i(86659),x=i(83559),S=i(85907),C=i(54733),U=i(27608),k=i(75470),w=i(98911);function F(t,e){1&t&&n._UZ(0,"v-loader")}function I(t,e){if(1&t&&(n.TgZ(0,"th",16),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Oqu(t)}}const L=function(t,e){return[t,e,"edit"]};function y(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._UZ(4,"img",17),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._UZ(12,"v-btn",18),n.TgZ(13,"v-btn",19),n.NdJ("actionEvent",function(e){return n.CHM(t),n.oxw().delete(e)}),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit,i=e.index,s=n.oxw();let r;n.xp6(2),n.Oqu(i+1),n.xp6(2),n.s9C("src",null!==(r=t.profilePicture)&&void 0!==r?r:s.avatarImgLocalPath,n.LSH),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(t.email),n.xp6(2),n.Oqu(t.roleId?t.roleId.name:""),n.xp6(2),n.Q6J("link",n.WLB(7,L,s.listRoute,t._id)),n.xp6(1),n.Q6J("actionValue",t._id)}}let J=(()=>{class t{constructor(t,e){this._userService=t,this.modalService=e,this.isSubmitted=!1,this.title="Users",this.avatarImgLocalPath=r.h.avatarImgLocalPath,this.breadCrumbLinkItems=o.breadCrumbLinkItems,this.listRoute=o.listRoute,this.createRoute=o.listRoute+"/create",this.list=[],this.dtOptions={},this.dtTrigger=new x.xQ,this.thCols=["Id","Profile picture","Name","Email","Role","Actions"],this.anouncementsList=[]}ngOnInit(){this.index(),this.dtOptions=q.Z.options}index(){this.isSubmitted=!0,this.list=[],this._userService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.isSubmitted=!1,this.list=t.data,this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._userService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),_.Z.showSweetAlert("Deleted Successfully",!1)},t=>{console.log("err:",t),_.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}openModal(t){this.modalRef=this.modalService.show(t)}showPopUpToSelectAnnouncemnets(t,e){this.selectedContactId=e,this.openModal(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(U.K),n.Y36(k.tT))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-list-users"]],viewQuery:function(t,e){if(1&t&&n.Gf(C.G,5),2&t){let t;n.iGM(t=n.CRH())&&(e.dtElement=t.first)}},decls:22,vars:11,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","add",3,"link"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["alt","",1,"rounded-circle","i-50",3,"src"],["actionType","edit",3,"link"],["actionType","deleteclick",3,"actionValue","actionEvent"]],template:function(t,e){1&t&&(n.YNc(0,F,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"div",11),n.TgZ(15,"table",12),n.TgZ(16,"thead",13),n.TgZ(17,"tr"),n.YNc(18,I,2,1,"th",14),n.qZA(),n.qZA(),n.TgZ(19,"tbody"),n.YNc(20,y,14,10,"tr",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(21,"app-footer"),n.qZA()),2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),n.xp6(1),n.Q6J("@slideFromRight",void 0),n.xp6(4),n.hij(" List ",e.title,""),n.xp6(2),n.Q6J("link",e.createRoute),n.xp6(3),n.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),n.xp6(3),n.Q6J("ngForOf",e.thCols),n.xp6(2),n.Q6J("ngForOf",e.list))},directives:[s.O5,a.G,l.k,d.e,w.K,C.G,s.sg,c.c,u.O],styles:[".i-50[_ngcontent-%COMP%]{width:50px;height:50px}"],data:{animation:[(0,T.X$)("slideFromRight",[(0,T.eR)("void=>*",[(0,T.oB)({opacity:0,transform:"translateX(100%)"}),(0,T.jt)(".8s",(0,T.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})();var O=i(11462),N=i(17145),Q=i(42693);let R=(()=>{class t{constructor(t){this._httpClient=t,this.url=N.A.ROLES}sIndex(){return this._httpClient.get(this.url)}sStore1(t){let e=Object.assign({},t);return this._httpClient.post(this.url,e)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sStore(t){return this._httpClient.post(this.url,t)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(Q.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=i(15842);function Y(t,e){1&t&&n._UZ(0,"v-loader")}function B(t,e){if(1&t&&(n.TgZ(0,"option",27),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.Q6J("value",t._id),n.xp6(1),n.Oqu(t.name)}}function E(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1," Select Role "),n.qZA())}function G(t,e){if(1&t&&n._UZ(0,"img",28),2&t){const t=n.oxw();let e;n.s9C("src",null!==(e=t.singleData.profilePictureUrl)&&void 0!==e?e:t.avatarImgLocalPath,n.LSH)}}let D=(()=>{class t{constructor(t,e,i,s,n){this._userService=t,this._roleService=e,this._router=i,this._formBuilder=s,this._activatedRoute=n,this.isSubmitted=!1,this.title=" Users",this.breadCrumbLinkItems=o.breadCrumbLinkItems,this.listRoute=o.listRoute,this.avatarImgLocalPath=r.h.avatarImgLocalPath,this.addForm=this._formBuilder.group({name:[null,O.kI.required],email:[null,O.kI.required],password:[null],roleId:[-1,O.kI.required]}),this.selectedId=this._activatedRoute.snapshot.params.id,this.loadData(this.selectedId)}ngOnInit(){this.indexRoles()}get fCtrls(){return this.addForm.controls}loadData(t){this.isSubmitted=!0,this._userService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.singleData=t.data,this.addForm.patchValue(Object.assign({},t.data))),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}onUpdate(){console.log(this.addForm.value);const t=new FormData;t.append("name",this.fCtrls.name.value),t.append("email",this.fCtrls.email.value),this.selectedFiles&&this.selectedFiles.length&&t.append("file",this.selectedFiles[0]),this.fCtrls.password.value&&t.append("password",this.fCtrls.password.value),t.append("roleId",this.fCtrls.roleId.value),this.isSubmitted=!0,this._userService.sUpdate(this.selectedId,t).subscribe(t=>{S.success("Updated successfully"),this.isSubmitted=!1,this._router.navigateByUrl(this.listRoute)},t=>{S.error("No data found","Error !"),this.isSubmitted=!1})}selectFiles(t,e){this.fileRef=e,this.selectedFiles=t.target.files,console.log("this.selectedFiles:",this.selectedFiles)}indexRoles(){this.isSubmitted=!0,this.listRoles=[],this._roleService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.listRoles=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(U.K),n.Y36(R),n.Y36(p.F0),n.Y36(O.qu),n.Y36(p.gz))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-edit-users"]],decls:42,vars:13,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","name","label","Name",3,"fGroup"],["fCtrlName","email","label","Email",3,"fGroup"],["fCtrlName","password","label","Password","type","password",3,"fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["name","","id","","formControlName","roleId",1,"form-control"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["type","file","accept","image/png, image/gif, image/jpeg, image/jpg",1,"form-control",3,"change"],["file",""],["alt","","class","rounded-circle i-50 mt-2",3,"src",4,"ngIf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],["alt","",1,"rounded-circle","i-50","mt-2",3,"src"]],template:function(t,e){if(1&t){const t=n.EpF();n.YNc(0,Y,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"form",11),n.TgZ(15,"div",12),n.TgZ(16,"div",13),n._UZ(17,"app-v-input-full",14),n.qZA(),n.TgZ(18,"div",13),n._UZ(19,"app-v-input-full",15),n.qZA(),n.TgZ(20,"div",13),n._UZ(21,"app-v-input-full",16),n.qZA(),n.TgZ(22,"div",13),n.TgZ(23,"div",17),n.TgZ(24,"label",18),n._uU(25,"Select Role"),n.qZA(),n.TgZ(26,"select",19),n.TgZ(27,"option",20),n._uU(28,"--Select--"),n.qZA(),n.YNc(29,B,2,2,"option",21),n.qZA(),n.YNc(30,E,2,0,"p",0),n.qZA(),n.qZA(),n.TgZ(31,"div",13),n.TgZ(32,"div",17),n.TgZ(33,"label",18),n._uU(34,"Upload file"),n.qZA(),n.TgZ(35,"input",22,23),n.NdJ("change",function(i){n.CHM(t);const s=n.MAs(36);return e.selectFiles(i,s)}),n.qZA(),n.YNc(37,G,1,1,"img",24),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(38,"div",25),n.TgZ(39,"button",26),n.NdJ("click",function(){return e.onUpdate()}),n._uU(40,"Update"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(41,"app-footer"),n.qZA()}2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0),n.xp6(5),n.hij("Edit ",e.title,""),n.xp6(2),n.Q6J("link",e.listRoute),n.xp6(2),n.Q6J("formGroup",e.addForm),n.xp6(3),n.Q6J("fGroup",e.addForm),n.xp6(2),n.Q6J("fGroup",e.addForm),n.xp6(2),n.Q6J("fGroup",e.addForm),n.xp6(8),n.Q6J("ngForOf",e.listRoles),n.xp6(1),n.Q6J("ngIf",e.fCtrls.roleId.dirty&&e.fCtrls.roleId.invalid),n.xp6(7),n.Q6J("ngIf",e.singleData),n.xp6(2),n.Q6J("disabled",!e.addForm.valid))},directives:[s.O5,a.G,l.k,d.e,w.K,O._Y,O.JL,O.sg,P.a,O.EJ,O.JJ,O.u,O.YN,O.Kr,s.sg,c.c,u.O],styles:[".i-50[_ngcontent-%COMP%]{width:50px;height:50px}"]}),t})();function j(t,e){1&t&&n._UZ(0,"v-loader")}function M(t,e){if(1&t&&(n.TgZ(0,"option",26),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.Q6J("value",t._id),n.xp6(1),n.Oqu(t.name)}}function $(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1," Select Role "),n.qZA())}let K=(()=>{class t{constructor(t,e,i,s){this._userService=t,this._roleService=e,this._router=i,this._formBuilder=s,this.isSubmitted=!1,this.title=" Users",this.backLink=o.listRoute,this.addForm=this._formBuilder.group({name:[null,O.kI.required],email:[null,O.kI.required],password:[null,O.kI.required],roleId:[null,O.kI.required]}),this.parentsList=[],this.isAddingDownline=!1}ngOnInit(){this.indexRoles()}get fCtrls(){return this.addForm.controls}onSubmit1(){console.log(this.addForm.value),this.isSubmitted=!0,this._userService.sStore(this.addForm.value).subscribe(t=>{this.isSubmitted=!1,this._router.navigateByUrl(this.backLink)},t=>{this.isSubmitted=!1})}onSubmit(){console.log(this.addForm.value);const t=new FormData;this.selectedFiles&&this.selectedFiles.length&&t.append("file",this.selectedFiles[0]),t.append("name",this.fCtrls.name.value),t.append("email",this.fCtrls.email.value),t.append("password",this.fCtrls.password.value),t.append("roleId",this.fCtrls.roleId.value),this.isSubmitted=!0,this._userService.sStore(t).subscribe(t=>{this.isSubmitted=!1,S.success("Added successfully"),this._router.navigateByUrl(this.backLink)},t=>{S.error("No data found","Error !"),this.isSubmitted=!1})}onChangeAddingType(t){this.isAddingDownline="downline"==t,this.isAddingDownline=!1,"downline"==t?(this.fCtrls.parentCandidateId.setValidators([O.kI.required]),this.fCtrls.parentCandidateId.updateValueAndValidity(),this.isAddingDownline=!0):"upline"==t&&(this.isAddingDownline=!1)}selectFiles(t,e){this.fileRef=e,this.selectedFiles=t.target.files,console.log("this.selectedFiles:",this.selectedFiles)}indexRoles(){this.isSubmitted=!0,this.listRoles=[],this._roleService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.listRoles=t.data),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(U.K),n.Y36(R),n.Y36(p.F0),n.Y36(O.qu))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-add-users"]],decls:41,vars:12,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","name","label","Name",3,"fGroup"],["fCtrlName","email","label","Email",3,"fGroup"],["fCtrlName","password","label","Password","type","password","maxlength","8",3,"fGroup"],[1,"form-group"],["for","exampleInputEmail1"],["name","","id","","formControlName","roleId",1,"form-control"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["type","file","accept","image/png, image/gif, image/jpeg, image/jpg",1,"form-control","file-input",3,"change"],["file",""],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t){const t=n.EpF();n.YNc(0,j,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"form",11),n.TgZ(15,"div",12),n.TgZ(16,"div",13),n._UZ(17,"app-v-input-full",14),n.qZA(),n.TgZ(18,"div",13),n._UZ(19,"app-v-input-full",15),n.qZA(),n.TgZ(20,"div",13),n._UZ(21,"app-v-input-full",16),n.qZA(),n.TgZ(22,"div",13),n.TgZ(23,"div",17),n.TgZ(24,"label",18),n._uU(25,"Select Role"),n.qZA(),n.TgZ(26,"select",19),n.TgZ(27,"option",20),n._uU(28,"--Select--"),n.qZA(),n.YNc(29,M,2,2,"option",21),n.qZA(),n.YNc(30,$,2,0,"p",0),n.qZA(),n.qZA(),n.TgZ(31,"div",13),n.TgZ(32,"div",17),n.TgZ(33,"label",18),n._uU(34,"Upload file"),n.qZA(),n.TgZ(35,"input",22,23),n.NdJ("change",function(i){n.CHM(t);const s=n.MAs(36);return e.selectFiles(i,s)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(37,"div",24),n.TgZ(38,"button",25),n.NdJ("click",function(){return e.onSubmit()}),n._uU(39,"Submit"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(40,"app-footer"),n.qZA()}2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0),n.xp6(5),n.hij("Add ",e.title,""),n.xp6(2),n.Q6J("link",e.backLink),n.xp6(2),n.Q6J("formGroup",e.addForm),n.xp6(3),n.Q6J("fGroup",e.addForm),n.xp6(2),n.Q6J("fGroup",e.addForm),n.xp6(2),n.Q6J("fGroup",e.addForm),n.xp6(8),n.Q6J("ngForOf",e.listRoles),n.xp6(1),n.Q6J("ngIf",e.fCtrls.roleId.dirty&&e.fCtrls.roleId.invalid),n.xp6(8),n.Q6J("disabled",!e.addForm.valid))},directives:[s.O5,a.G,l.k,d.e,w.K,O._Y,O.JL,O.sg,P.a,O.EJ,O.JJ,O.u,O.YN,O.Kr,s.sg,c.c,u.O],styles:[""]}),t})();var X=i(91082);function V(t,e){1&t&&n._UZ(0,"v-loader")}function W(t,e){if(1&t&&(n.TgZ(0,"th",16),n._uU(1),n.qZA()),2&t){const t=e.$implicit;n.xp6(1),n.Oqu(t)}}const H=function(t,e){return[t,e,"edit"]};function z(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._UZ(6,"v-btn",17),n.TgZ(7,"v-btn",18),n.NdJ("actionEvent",function(e){return n.CHM(t),n.oxw().delete(e)}),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit,i=e.index,s=n.oxw();n.xp6(2),n.Oqu(i+1),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Q6J("link",n.WLB(4,H,s.listRoute,t._id)),n.xp6(1),n.Q6J("actionValue",t._id)}}let tt=(()=>{class t{constructor(t,e,i){this._roleService=t,this._vtoastrService=e,this.modalService=i,this.isSubmitted=!1,this.title="Roles",this.avatarImgLocalPath=r.h.avatarImgLocalPath,this.breadCrumbLinkItems=o.breadCrumbLinkItems,this.listRoute=o.listRolesRoute,this.createRoute=o.listRolesRoute+"/create",this.list=[],this.dtOptions={},this.dtTrigger=new x.xQ,this.thCols=["Id","Name","Actions"],this.anouncementsList=[]}ngOnInit(){this.index(),this.dtOptions=q.Z.options}index(){this.isSubmitted=!0,this.list=[],this._roleService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.list=t.data,this.dtTrigger.next()),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}edit(){}delete(t){console.log("e:",t),this.isSubmitted=!0,this._roleService.sDelete(t).subscribe(t=>{console.log("res:",t),this.isSubmitted=!1,this.index(),t.success?_.Z.showSweetAlert("Deleted Successfully",!1):this._vtoastrService.error(t.error)},t=>{console.log("err:",t),_.Z.showSweetAlert(t.error.message,!1),this.isSubmitted=!1})}openModal(t){this.modalRef=this.modalService.show(t)}showPopUpToSelectAnnouncemnets(t,e){this.selectedContactId=e,this.openModal(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(R),n.Y36(X.a),n.Y36(k.tT))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-list-roles"]],decls:22,vars:11,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb","breadCrumbLinkItems"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","add",3,"link"],[1,"card-body"],[1,"table-responsive"],["datatable","",1,"table","table-striped","table-bordered","compact",3,"dtOptions","dtTrigger"],[1,"bg-info"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["actionType","edit",3,"link"],["actionType","deleteclick",3,"actionValue","actionEvent"]],template:function(t,e){1&t&&(n.YNc(0,V,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"div",11),n.TgZ(15,"table",12),n.TgZ(16,"thead",13),n.TgZ(17,"tr"),n.YNc(18,W,2,1,"th",14),n.qZA(),n.qZA(),n.TgZ(19,"tbody"),n.YNc(20,z,8,7,"tr",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(21,"app-footer"),n.qZA()),2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0)("breadCrumbLinkItems",e.breadCrumbLinkItems),n.xp6(1),n.Q6J("@slideFromRight",void 0),n.xp6(4),n.hij(" List ",e.title,""),n.xp6(2),n.Q6J("link",e.createRoute),n.xp6(3),n.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),n.xp6(3),n.Q6J("ngForOf",e.thCols),n.xp6(2),n.Q6J("ngForOf",e.list))},directives:[s.O5,a.G,l.k,d.e,w.K,C.G,s.sg,c.c,u.O],styles:[""],data:{animation:[(0,T.X$)("slideFromRight",[(0,T.eR)("void=>*",[(0,T.oB)({opacity:0,transform:"translateX(100%)"}),(0,T.jt)(".8s",(0,T.oB)({opacity:1,transform:"translateX(0)"}))])])]}}),t})(),et=(()=>{class t{constructor(t){this._httpClient=t,this.url=N.A.PERMISSIONS}sIndex(){return this._httpClient.get(this.url)}sStore1(t){let e=Object.assign({},t);return this._httpClient.post(this.url,e)}sShow(t){return this._httpClient.get(this.url+"/"+t)}sUpdate(t,e){return this._httpClient.patch(this.url+"/"+t,e)}sDelete(t){return this._httpClient.delete(this.url+"/"+t)}sStore(t){return this._httpClient.post(this.url,t)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(Q.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function it(t,e){1&t&&n._UZ(0,"v-loader")}function st(t,e){if(1&t&&(n.TgZ(0,"li",20),n.TgZ(1,"div",21),n._UZ(2,"input",22),n.TgZ(3,"label",23),n._uU(4),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.index,i=n.oxw();n.xp6(2),n.s9C("value",i.permissionsList[t]._id),n.s9C("id",i.permissionsList[t].name),n.Q6J("formControlName",t),n.xp6(1),n.s9C("for",i.permissionsList[t].name),n.xp6(1),n.hij(" ",i.permissionsList[t].name," ")}}function rt(t,e){1&t&&n._UZ(0,"v-loader")}function ot(t,e){if(1&t&&(n.TgZ(0,"li",20),n.TgZ(1,"div",21),n._UZ(2,"input",22),n.TgZ(3,"label",23),n._uU(4),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.index,i=n.oxw();n.xp6(2),n.s9C("value",i.permissionsList[t]._id),n.s9C("id",i.permissionsList[t].name),n.Q6J("formControlName",t),n.xp6(1),n.s9C("for",i.permissionsList[t].name),n.xp6(1),n.hij(" ",i.permissionsList[t].name," ")}}const nt=[{path:"",component:A},{path:"users",component:J},{path:"users/create",component:K},{path:"users/:id/edit",component:D},{path:"roles",component:tt},{path:"roles/create",component:(()=>{class t{constructor(t,e,i,s){this._roleService=t,this._permissionService=e,this._router=i,this._formBuilder=s,this.isSubmitted=!1,this.title=" Roles",this.backLink=o.listRolesRoute,this.addForm=this._formBuilder.group({name:[null,O.kI.required],permissionsArrayList:new O.Oe([])}),this.parentsList=[],this.isAddingDownline=!1}ngOnInit(){this.indexPermissions()}get fCtrls(){return this.addForm.controls}onSubmit(){if(console.log(this.addForm.value),this.addForm.invalid)return S.error("Please enter required fields","Error!"),!1;const t=this.addForm.value.permissionsArrayList.map((t,e)=>t?this.permissionsList[e]._id:null).filter(t=>null!==t);let e={name:this.fCtrls.name.value,selectedPermissionIds:t};if(!t||0==t.length)return S.error("Please select permissions","Error!"),!1;this.isSubmitted=!0,this._roleService.sStore(e).subscribe(t=>{this.isSubmitted=!1,S.success("Added successfully"),this._router.navigateByUrl(this.backLink)},t=>{S.error("No data found","Error !"),this.isSubmitted=!1})}indexPermissions(){this.isSubmitted=!0,this._permissionService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.permissionsList=t.data,this.setPermissionsListWithState()),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}setPermissionsListWithState(){this.permissionsListWithState=this.parentsList.map(t=>Object.assign(Object.assign({},t),{label:t.name,isChecked:!1})),this.addCheckboxesToForm()}get permissionsFormArray(){return this.addForm.controls.permissionsArrayList}addCheckboxesToForm(){this.permissionsList.forEach(()=>this.permissionsFormArray.push(new O.NI(!1)))}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(R),n.Y36(et),n.Y36(p.F0),n.Y36(O.qu))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-add-roles"]],decls:27,vars:8,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","name","label","Name",3,"fGroup"],[1,"col-md-12"],[1,"list-group"],["class","list-group-item","formArrayName","permissionsArrayList",4,"ngFor","ngForOf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["formArrayName","permissionsArrayList",1,"list-group-item"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"value","id","formControlName"],[1,"form-check-label",3,"for"]],template:function(t,e){1&t&&(n.YNc(0,it,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"form",11),n.TgZ(15,"div",12),n.TgZ(16,"div",13),n._UZ(17,"app-v-input-full",14),n.qZA(),n.TgZ(18,"div",15),n.TgZ(19,"h5"),n._uU(20,"Permissions List"),n.qZA(),n.TgZ(21,"ul",16),n.YNc(22,st,5,5,"li",17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",18),n.TgZ(24,"button",19),n.NdJ("click",function(){return e.onSubmit()}),n._uU(25,"Submit"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(26,"app-footer"),n.qZA()),2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0),n.xp6(5),n.hij("Add ",e.title,""),n.xp6(2),n.Q6J("link",e.backLink),n.xp6(2),n.Q6J("formGroup",e.addForm),n.xp6(3),n.Q6J("fGroup",e.addForm),n.xp6(5),n.Q6J("ngForOf",e.permissionsFormArray.controls))},directives:[s.O5,a.G,l.k,d.e,w.K,O._Y,O.JL,O.sg,P.a,s.sg,c.c,u.O,O.CE,O.Wl,O.JJ,O.u],styles:[""]}),t})()},{path:"roles/:id/edit",component:(()=>{class t{constructor(t,e,i,s,r){this._roleService=t,this._permissionService=e,this._router=i,this._formBuilder=s,this._activatedRoute=r,this.isSubmitted=!1,this.title=" Roles",this.backLink=o.listRolesRoute,this.addForm=this._formBuilder.group({name:[null,O.kI.required],permissionsArrayList:new O.Oe([])}),this.parentsList=[],this.isAddingDownline=!1,this.selectedId=this._activatedRoute.snapshot.params.id}ngOnInit(){this.indexPermissions(),this.loadData(this.selectedId)}get fCtrls(){return this.addForm.controls}onUpdate(){console.log(this.addForm.value);const t=this.addForm.value.permissionsArrayList.map((t,e)=>t?this.permissionsList[e]._id:null).filter(t=>null!==t);let e={name:this.fCtrls.name.value,selectedPermissionIds:t};this.isSubmitted=!0,this._roleService.sUpdate(this.selectedId,e).subscribe(t=>{this.isSubmitted=!1,S.success("Added successfully"),this._router.navigateByUrl(this.backLink)},t=>{S.error("No data found","Error !"),this.isSubmitted=!1})}indexPermissions(){this.isSubmitted=!0,this._permissionService.sIndex().subscribe(t=>{t&&t.data&&t.data.length&&(this.permissionsList=t.data,this.setPermissionsListWithState()),this.isSubmitted=!1},t=>{console.log("Error !"),S.error("No data found","Error !"),this.isSubmitted=!1})}setPermissionsListWithState(){this.permissionsListWithState=this.parentsList.map(t=>Object.assign(Object.assign({},t),{label:t.name,isChecked:!1}))}get permissionsFormArray(){return this.addForm.controls.permissionsArrayList}addCheckboxesToForm(){console.log("this.singleData :==2==",this.singleData),this.permissionsList.forEach(t=>this.permissionsFormArray.push(new O.NI(!!this.isPermissionSelected(t._id))))}loadData(t){this.isSubmitted=!0,this._roleService.sShow(t).subscribe(t=>{t&&t.data&&(console.log("res.data:===",t.data),this.singleData=t.data,this.addCheckboxesToForm(),this.addForm.patchValue(Object.assign({},t.data))),this.isSubmitted=!1},t=>{console.log("Error !"),this.isSubmitted=!1})}isPermissionSelected(t){return Object.values(this.singleData.rolePermissions).find(e=>e.permissionId==t)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(R),n.Y36(et),n.Y36(p.F0),n.Y36(O.qu),n.Y36(p.gz))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-edit-roles"]],decls:27,vars:8,consts:[[4,"ngIf"],[1,"wrapper"],[1,"content-wrapper"],[3,"title","canshowBreadCrumb"],[1,"content"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],["actionType","back",3,"link"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["fCtrlName","name","label","Name",3,"fGroup"],[1,"col-md-12"],[1,"list-group"],["class","list-group-item","formArrayName","permissionsArrayList",4,"ngFor","ngForOf"],[1,"card-footer","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["formArrayName","permissionsArrayList",1,"list-group-item"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"value","id","formControlName"],[1,"form-check-label",3,"for"]],template:function(t,e){1&t&&(n.YNc(0,rt,1,0,"v-loader",0),n.TgZ(1,"div",1),n._UZ(2,"app-header"),n._UZ(3,"app-sidebar"),n.TgZ(4,"div",2),n._UZ(5,"app-content-header",3),n.TgZ(6,"section",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"h3",7),n._uU(10),n.qZA(),n.TgZ(11,"div",8),n._UZ(12,"v-btn",9),n.qZA(),n.qZA(),n.TgZ(13,"div",10),n.TgZ(14,"form",11),n.TgZ(15,"div",12),n.TgZ(16,"div",13),n._UZ(17,"app-v-input-full",14),n.qZA(),n.TgZ(18,"div",15),n.TgZ(19,"h5"),n._uU(20,"Permissions List"),n.qZA(),n.TgZ(21,"ul",16),n.YNc(22,ot,5,5,"li",17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",18),n.TgZ(24,"button",19),n.NdJ("click",function(){return e.onUpdate()}),n._uU(25,"Update"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(26,"app-footer"),n.qZA()),2&t&&(n.Q6J("ngIf",e.isSubmitted),n.xp6(5),n.Q6J("title",e.title)("canshowBreadCrumb",!0),n.xp6(5),n.hij("Edit ",e.title,""),n.xp6(2),n.Q6J("link",e.backLink),n.xp6(2),n.Q6J("formGroup",e.addForm),n.xp6(3),n.Q6J("fGroup",e.addForm),n.xp6(5),n.Q6J("ngForOf",e.permissionsFormArray.controls))},directives:[s.O5,a.G,l.k,d.e,w.K,O._Y,O.JL,O.sg,P.a,s.sg,c.c,u.O,O.CE,O.Wl,O.JJ,O.u],styles:[""]}),t})()}];let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.Bz.forChild(nt)],p.Bz]}),t})();var lt=i(47635);let dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[s.ez,at,lt.m]]}),t})()},86659:function(t,e,i){"use strict";i.d(e,{Z:function(){return o}});var s=i(22501),r=i.n(s);class o{static showSweetAlert(t,e=!0){r().fire({position:"top-end",icon:e?"success":"error",title:t,showConfirmButton:!1,timer:3e3})}}},71397:function(t,e){"use strict";e.Z=(()=>{class t{}return t.options={bDestroy:!0,multiple:!0,pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0,language:{search:"Quick Search:"},fnDrawCallback:function(){$("input[type='search']").attr("id","searchBox"),$("#dialPlanListTable").css("cssText","margin-top: 0px !important;"),$("select[name='dialPlanListTable_length'], #searchBox").removeClass("input-sm"),$("#searchBox").css("width","330px").focus(),$("#dialPlanListTable_filter").removeClass("dataTables_filter")},dom:"Bfrtip",buttons:[{extend:"excel",className:"btn-success1",text:"Download Excel"}]},t.optionsWithoutDownload={bDestroy:!0,multiple:!0,pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0,language:{search:"Quick Search:"},fnDrawCallback:function(){$("input[type='search']").attr("id","searchBox"),$("#dialPlanListTable").css("cssText","margin-top: 0px !important;"),$("select[name='dialPlanListTable_length'], #searchBox").removeClass("input-sm"),$("#searchBox").css("width","330px").focus(),$("#dialPlanListTable_filter").removeClass("dataTables_filter")}},t})()}}]);